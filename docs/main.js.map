{"version":3,"sources":["webpack:///(webpack)/buildin/global.js","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/components/chat-form/chat-form.component.css","webpack:///./src/app/components/chat-form/chat-form.component.html","webpack:///./src/app/components/chat-form/chat-form.component.ts","webpack:///./src/app/components/chat/chat.component.css","webpack:///./src/app/components/chat/chat.component.html","webpack:///./src/app/components/chat/chat.component.ts","webpack:///./src/app/components/feed/feed.component.css","webpack:///./src/app/components/feed/feed.component.html","webpack:///./src/app/components/feed/feed.component.ts","webpack:///./src/app/components/friend-item/friend-item.component.css","webpack:///./src/app/components/friend-item/friend-item.component.html","webpack:///./src/app/components/friend-item/friend-item.component.ts","webpack:///./src/app/components/friend-list/friend-list.component.css","webpack:///./src/app/components/friend-list/friend-list.component.html","webpack:///./src/app/components/friend-list/friend-list.component.ts","webpack:///./src/app/components/login-popup/login-popup.component.css","webpack:///./src/app/components/login-popup/login-popup.component.html","webpack:///./src/app/components/login-popup/login-popup.component.ts","webpack:///./src/app/components/login/login.component.css","webpack:///./src/app/components/login/login.component.html","webpack:///./src/app/components/login/login.component.ts","webpack:///./src/app/components/message/message.component.css","webpack:///./src/app/components/message/message.component.html","webpack:///./src/app/components/message/message.component.ts","webpack:///./src/app/components/navbar/navbar.component.css","webpack:///./src/app/components/navbar/navbar.component.html","webpack:///./src/app/components/navbar/navbar.component.ts","webpack:///./src/app/components/profile/profile.component.css","webpack:///./src/app/components/profile/profile.component.html","webpack:///./src/app/components/profile/profile.component.ts","webpack:///./src/app/components/register/register.component.css","webpack:///./src/app/components/register/register.component.html","webpack:///./src/app/components/register/register.component.ts","webpack:///./src/app/models/chat-message.model.ts","webpack:///./src/app/models/notification.model.ts","webpack:///./src/app/models/user.model.ts","webpack:///./src/app/services/auth.guard.service.ts","webpack:///./src/app/services/chat.service.ts","webpack:///./src/app/services/rdf.service.ts","webpack:///./src/app/services/solid.auth.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;;;;;ACZA,mB;;;;;;;;;;;ACAA,sL;;;;;;;;;;;;;;;;;;;;;ACA0C;AAQ1C;IALA;QAME,UAAK,GAAG,SAAS,CAAC;IACpB,CAAC;IAFY,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;OACW,YAAY,CAExB;IAAD,mBAAC;CAAA;AAFwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRiC;AACjB;AACc;AAEvD,aAAa;AACkC;AACsC;AACjB;AACS;AACH;AACK;AACd;AACA;AACS;AACH;AACc;AACA;AAErF,WAAW;AACiD;AACN;AACI;AACJ;AACT;AACH;AACqC;AAG/E,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,gFAAc;KAC1B;IACD;QACE,IAAI,EAAE,OAAO;QACb,SAAS,EAAE,gFAAc;KAC1B;IACD;QACE,IAAI,EAAE,aAAa;QACnB,SAAS,EAAE,iGAAmB;KAC/B;IACD;QACE,IAAI,EAAE,SAAS;QACf,SAAS,EAAE,sFAAgB;QAC3B,WAAW,EAAE,CAAC,uEAAS,CAAC;KACzB;IACD;QACE,IAAI,EAAE,MAAM;QACZ,SAAS,EAAE,6EAAa;QACxB,WAAW,EAAE,CAAC,uEAAS,CAAC;KACzB;IAED;QACE,IAAI,EAAE,UAAU;QAChB,SAAS,EAAE,yFAAiB;KAC7B;CAEF,CAAC;AA4BF;IAAA;IAAyB,CAAC;IAAb,SAAS;QA1BrB,8DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAY;gBACZ,gFAAc;gBACd,iGAAmB;gBACnB,sFAAgB;gBAChB,yFAAiB;gBACjB,2FAAiB;gBACjB,6EAAa;gBACb,8EAAa;gBACb,uFAAgB;gBAChB,oFAAe;gBACf,kGAAmB;gBACnB,kGAAmB;aACpB;YACD,OAAO,EAAE;gBACP,uEAAa;gBACb,2DAAW;gBACX,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC;gBAC5B,oEAAc;gBACd,wDAAY,CAAC,OAAO,EAAE;gBACtB,6FAAuB,CAAC,sBAAsB;aAC/C;YACD,SAAS,EAAE,CAAC,yEAAW,EAAG,mEAAW,CAAC;YACtC,SAAS,EAAE,CAAC,2DAAY,CAAC;SAC1B,CAAC;OACW,SAAS,CAAI;IAAD,gBAAC;CAAA;AAAJ;;;;;;;;;;;;ACrFtB,6BAA6B,mBAAmB,+BAA+B,2BAA2B,iBAAiB,iBAAiB,wBAAwB,yBAAyB,2BAA2B,6CAA6C,+BAA+B,oBAAoB,kCAAkC,KAAK,yBAAyB,kCAAkC,oBAAoB,iCAAiC,KAAK,oBAAoB,2BAA2B,kBAAkB,kBAAkB,iBAAiB,4BAA4B,mBAAmB,+BAA+B,wBAAwB,yBAAyB,iCAAiC,2BAA2B,8CAA8C,0CAA0C,qBAAqB,kCAAkC,2BAA2B,KAAK,0BAA0B,+BAA+B,KAAK,iBAAiB,iCAAiC,yBAAyB,oBAAoB,iBAAiB,yBAAyB,iCAAiC,KAAK,C;;;;;;;;;;;ACA/oC,mS;;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AACQ;AAO1D;IAGE,2BAAoB,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;IAAI,CAAC;IAE1C,oCAAQ,GAAR;IACA,CAAC;IAED,gCAAI,GAAJ;QACE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAED,wCAAY,GAAZ,UAAa,KAAK;QAChB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,KAAK,EAAE,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,IAAI,EAAE,CAAC;QACd,CAAC;IACH,CAAC;IAjBU,iBAAiB;QAL7B,+DAAS,CAAC;YACT,QAAQ,EAAE,eAAe;;;SAG1B,CAAC;yCAI0B,kEAAW;OAH1B,iBAAiB,CAkB7B;IAAD,wBAAC;CAAA;AAlB6B;;;;;;;;;;;;ACR9B,+BAA+B,sBAAsB,sCAAsC,KAAK,0BAA0B,2CAA2C,oBAAoB,sBAAsB,+CAA+C,2BAA2B,gBAAgB,iBAAiB,iDAAiD,qCAAqC,uBAAuB,2BAA2B,KAAK,sBAAsB,+BAA+B,oKAAoK,+CAA+C,2BAA2B,gBAAgB,iBAAiB,yBAAyB,iDAAiD,KAAK,0BAA0B,wBAAwB,2CAA2C,yBAAyB,iCAAiC,yBAAyB,KAAK,+CAA+C,6BAA6B,gCAAgC,KAAK,uBAAuB,oBAAoB,KAAK,C;;;;;;;;;;;ACAhrC,8T;;;;;;;;;;;;;;;;;;;;;;;;ACA2F;AAO3F;IAGE;IAAgB,CAAC;IAEjB,gCAAQ,GAAR;IACA,CAAC;IAED,sCAAc,GAAd;QACE,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,SAAS;cACxC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,YAAY,CAAC;IAClD,CAAC;IAED,0CAAkB,GAAlB;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAdsB;QAAtB,+DAAS,CAAC,UAAU,CAAC;kCAAwB,wDAAU;wDAAC;IAD9C,aAAa;QALzB,+DAAS,CAAC;YACT,QAAQ,EAAE,cAAc;;;SAGzB,CAAC;;OACW,aAAa,CAgBzB;IAAD,oBAAC;CAAA;AAhByB;;;;;;;;;;;;ACP1B,wBAAwB,sBAAsB,+BAA+B,KAAK,iBAAiB,+BAA+B,0BAA0B,KAAK,C;;;;;;;;;;;ACAjK,0L;;;;;;;;;;;;;;;;;;;;;;;;;ACA6D;AACH;AAS1D;IAGE,uBAAoB,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;IAAG,CAAC;IAEzC,gCAAQ,GAAR;QAEE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;IAEtC,CAAC;IAED,mCAAW,GAAX;QACE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;IACtC,CAAC;IAbU,aAAa;QALzB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;yCAI0B,kEAAW;OAH1B,aAAa,CAezB;IAAD,oBAAC;CAAA;AAfyB;;;;;;;;;;;;ACV1B,4BAA4B,qBAAqB,yBAAyB,mBAAmB,4BAA4B,+BAA+B,gCAAgC,kCAAkC,2FAA2F,uBAAuB,+BAA+B,iCAAiC,KAAK,wBAAwB,kCAAkC,oBAAoB,iCAAiC,KAAK,gBAAgB,+BAA+B,KAAK,cAAc,+BAA+B,KAAK,iBAAiB,+BAA+B,KAAK,gBAAgB,oCAAoC,8BAA8B,2BAA2B,4BAA4B,2BAA2B,gDAAgD,KAAK,kBAAkB,0BAA0B,KAAK,yBAAyB,qBAAqB,yBAAyB,oBAAoB,4BAA4B,+BAA+B,+BAA+B,2FAA2F,+BAA+B,iCAAiC,kCAAkC,oBAAoB,KAAK,C;;;;;;;;;;;ACArzC,8DAA8D,+DAA+D,8GAA8G,eAAe,wB;;;;;;;;;;;;;;;;;;;;;;;;;;ACAjM;AACC;AACX;AAO/C;IAIE,6BAAoB,QAAqB;QAArB,aAAQ,GAAR,QAAQ,CAAa;QAFhC,SAAI,GAAS,IAAI,uDAAI,CAAC,eAAe,EAAE,cAAc,EAAE,0BAA0B,CAAC,CAAC;IAE/C,CAAC;IAE9C,sCAAQ,GAAR;IACA,CAAC;IAED,yCAAW,GAAX;QACE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACpC,CAAC;IATQ;QAAR,2DAAK,EAAE;kCAAO,uDAAI;qDAAyE;IAFjF,mBAAmB;QAL/B,+DAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;;;SAG5B,CAAC;yCAK8B,kEAAW;OAJ9B,mBAAmB,CAa/B;IAAD,0BAAC;CAAA;AAb+B;;;;;;;;;;;;ACThC,mB;;;;;;;;;;;ACAA,kJ;;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AAEQ;AAO1D;IAGE,6BAAY,IAAiB;QAA7B,iBAIC;QAHC,IAAI,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,eAAK;YAC/B,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAPU,mBAAmB;QAL/B,+DAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;;;SAG5B,CAAC;yCAIkB,kEAAW;OAHlB,mBAAmB,CAQ/B;IAAD,0BAAC;CAAA;AAR+B;;;;;;;;;;;;ACThC,mB;;;;;;;;;;;ACAA,yE;;;;;;;;;;;;;;;;;;;;;;;;ACA8D;AAQ9D;IAEE,6BAAoB,UAAsB;QAAtB,eAAU,GAAV,UAAU,CAAY;IAAG,CAAC;IAE9C,sCAAQ,GAAR;QACE,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAED,uCAAS,GAAT;QACE,IAAM,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC3C,CAAC,CAAC,IAAI,GAAG,iBAAiB,CAAC;QAC3B,CAAC,CAAC,GAAG,GAAG,0BAA0B,CAAC;QACnC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC7C,sCAAsC;IACxC,CAAC;IAdU,mBAAmB;QAL/B,+DAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;;;SAG5B,CAAC;yCAGgC,wDAAU;OAF/B,mBAAmB,CAgB/B;IAAD,0BAAC;CAAA;AAhB+B;;;;;;;;;;;;ACRhC,mCAAmC,yBAAyB,wCAAwC,kBAAkB,mBAAmB,0BAA0B,eAAe,sBAAsB,cAAc,sBAAsB,uBAAuB,+BAA+B,uBAAuB,KAAK,yBAAyB,sBAAsB,mBAAmB,KAAK,wBAAwB,wCAAwC,8BAA8B,qBAAqB,gCAAgC,wBAAwB,2BAA2B,8BAA8B,yBAAyB,0BAA0B,+BAA+B,uBAAuB,KAAK,wBAAwB,kBAAkB,yBAAyB,uBAAuB,8BAA8B,2BAA2B,0BAA0B,+BAA+B,uBAAuB,KAAK,wBAAwB,kBAAkB,yBAAyB,uBAAuB,sBAAsB,8BAA8B,2BAA2B,yBAAyB,+BAA+B,uBAAuB,KAAK,iCAAiC,yBAAyB,kBAAkB,6BAA6B,2BAA2B,+BAA+B,uBAAuB,KAAK,wCAAwC,sBAAsB,+BAA+B,uBAAuB,KAAK,0CAA0C,yBAAyB,kBAAkB,8BAA8B,+BAA+B,uBAAuB,KAAK,mCAAmC,4BAA4B,sBAAsB,sBAAsB,+BAA+B,uBAAuB,uBAAuB,gBAAgB,KAAK,C;;;;;;;;;;;ACA/2D,6GAA6G,ghBAAghB,2WAA2W,cAAc,mBAAmB,oBAAoB,uIAAuI,kBAAkB,oBAAoB,mBAAmB,kFAAkF,cAAc,aAAa,iBAAiB,6CAA6C,mBAAmB,KAAK,aAAa,8CAA8C,6TAA6T,oBAAoB,cAAc,cAAc,gBAAgB,mBAAmB,oBAAoB,sSAAsS,gIAAgI,oNAAoN,iN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAv8E;AACT;AACzC,eAAe;AACiD;AAShE;IAEE,wBAAoB,IAAiB,EAAU,MAAc;QAA7D,iBAAkE;QAA9C,SAAI,GAAJ,IAAI,CAAa;QAAU,WAAM,GAAN,MAAM,CAAQ;QAmB7D;;UAEE;QACF,iBAAY,GAAG;;gBACb,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;;;aAC7B;QAED,YAAO,GAAG;;;gBACF,GAAG,GAAW,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC;gBAEjG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBACR,IAAI,CAAC;wBACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;oBAC5B,CAAC;oBAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;wBACb,OAAO,CAAC,GAAG,CAAC,oCAAoC,GAAG,GAAG,CAAC,CAAC;oBAC1D,CAAC;gBACH,CAAC;;;aACF;IApCgE,CAAC;IAUlE,iCAAQ,GAAR;QACE,wCAAwC;QACxC,EAAE,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACrC,CAAC;QAED,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC5D,CAAC;IAqBD,yCAAgB,GAAhB;QACE,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;IACzC,CAAC;IA1CU,cAAc;QAL1B,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;;;SAGtB,CAAC;yCAG0B,wEAAW,EAAkB,sDAAM;OAFlD,cAAc,CA2C1B;IAAD,qBAAC;CAAA;AA3C0B;;;;;;;;;;;;ACZ3B,oCAAoC,sBAAsB,qBAAqB,mBAAmB,4BAA4B,+BAA+B,4BAA4B,+BAA+B,2FAA2F,KAAK,+BAA+B,kCAAkC,qBAAqB,8BAA8B,KAAK,qBAAqB,gBAAgB,yBAAyB,yBAAyB,KAAK,gBAAgB,uBAAuB,oBAAoB,0BAA0B,KAAK,qBAAqB,uBAAuB,KAAK,oBAAoB,oBAAoB,2BAA2B,KAAK,wBAAwB,uBAAuB,KAAK,wBAAwB,qBAAqB,gBAAgB,+BAA+B,yBAAyB,KAAK,6BAA6B,kCAAkC,uBAAuB,KAAK,wBAAwB,kCAAkC,yCAAyC,4CAA4C,KAAK,uBAAuB,kCAAkC,qBAAqB,yCAAyC,KAAK,oBAAoB,uBAAuB,wBAAwB,4BAA4B,KAAK,C;;;;;;;;;;;ACA71C,sEAAsE,qCAAqC,8DAA8D,gCAAgC,kEAAkE,2BAA2B,qBAAqB,YAAY,wFAAwF,8BAA8B,qBAAqB,6BAA6B,+FAA+F,mCAAmC,iBAAiB,kBAAkB,2P;;;;;;;;;;;;;;;;;;;;;;;;;;ACA3lB;AACC;AACI;AAO9D;IASE,0BAAoB,WAAwB;QAAxB,gBAAW,GAAX,WAAW,CAAa;QAJ5C,cAAS,GAAS,IAAI,IAAI,EAAE,CAAC;IAImB,CAAC;IAEjD,iCAAM,GAAN;QACE,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACnD,CAAC;IAED,mCAAQ,GAAR,UAAS,WAA8B;QAAvC,iBAeC;QAfQ,4CAAc,IAAI,CAAC,WAAW;QACrC,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;YACjB,WAAW,GAAG,IAAI,sEAAW,CAAC,UAAU,EAAE,aAAa,EAAE,kBAAkB,CAAC,CAAC;QAC/E,CAAC;QACD,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,cAAI;YACvC,EAAE,CAAC,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC;gBACvB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YAChC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;YAC7B,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,cAAc,GAAG,WAAW,CAAC,OAAO,CAAC;QAC1C,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,QAAQ,CAAC;QACtC,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,QAAQ,KAAK,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC7D,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;IACvC,CAAC;IA5BQ;QAAR,2DAAK,EAAE;kCAAc,sEAAW;yDAAC;IAFvB,gBAAgB;QAL5B,+DAAS,CAAC;YACT,QAAQ,EAAE,aAAa;;;SAGxB,CAAC;yCAUiC,kEAAW;OATjC,gBAAgB,CA+B5B;IAAD,uBAAC;CAAA;AA/B4B;;;;;;;;;;;;ACT7B,2BAA2B,oBAAoB,2CAA2C,wBAAwB,oBAAoB,yBAAyB,OAAO,qBAAqB,8BAA8B,uBAAuB,qBAAqB,OAAO,2BAA2B,2CAA2C,OAAO,4BAA4B,2CAA2C,OAAO,2BAA2B,2CAA2C,OAAO,yBAAyB,8BAA8B,0CAA0C,2BAA2B,0BAA0B,kCAAkC,0BAA0B,+BAA+B,2BAA2B,qBAAqB,sBAAsB,OAAO,8BAA8B,8BAA8B,uBAAuB,qBAAqB,2BAA2B,WAAW,gCAAgC,uBAAuB,2BAA2B,OAAO,iCAAiC,qBAAqB,OAAO,C;;;;;;;;;;;ACAtlC,0e;;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AAEc;AAQhE;IAIE,yBAAoB,WAAwB;QAAxB,gBAAW,GAAX,WAAW,CAAa;IAAI,CAAC;IAEjD,kCAAQ,GAAR;IAEA,CAAC;IAED,gCAAM,GAAN;QACE,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IAClC,CAAC;IAZU,eAAe;QAL3B,+DAAS,CAAC;YACT,QAAQ,EAAE,YAAY;;;SAGvB,CAAC;yCAKiC,wEAAW;OAJjC,eAAe,CAa3B;IAAD,sBAAC;CAAA;AAb2B;;;;;;;;;;;;ACV5B,sCAAsC,wCAAwC,KAAK,+BAA+B,yBAAyB,8BAA8B,wBAAwB,2BAA2B,8BAA8B,yBAAyB,0BAA0B,gCAAgC,KAAK,mCAAmC,0BAA0B,2BAA2B,qBAAqB,iCAAiC,+CAA+C,yBAAyB,KAAK,4DAA4D,oBAAoB,kBAAkB,6BAA6B,mCAAmC,KAAK,gEAAgE,sBAAsB,yBAAyB,wBAAwB,wBAAwB,yBAAyB,mBAAmB,qBAAqB,KAAK,qCAAqC,yBAAyB,qBAAqB,4BAA4B,6BAA6B,0BAA0B,KAAK,+DAA+D,sBAAsB,sBAAsB,oCAAoC,6BAA6B,uBAAuB,KAAK,0FAA0F,mCAAmC,KAAK,qFAAqF,mCAAmC,KAAK,sFAAsF,mCAAmC,KAAK,4EAA4E,mCAAmC,KAAK,wCAAwC,oBAAoB,0BAA0B,0BAA0B,sBAAsB,6BAA6B,gCAAgC,KAAK,8BAA8B,yCAAyC,wBAAwB,yBAAyB,sBAAsB,KAAK,uCAAuC,gCAAgC,4BAA4B,0BAA0B,KAAK,wBAAwB,yBAAyB,0BAA0B,KAAK,qBAAqB,sBAAsB,KAAK,wBAAwB,8BAA8B,KAAK,2BAA2B,4BAA4B,KAAK,C;;;;;;;;;;;ACAj/E,+pEAA+pE,kBAAkB,qkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACApnE;AACZ;AACT;AAEgB;AACQ;AAQhE;IASE,0BAAoB,GAAe,EACzB,KAAqB,EAAU,IAAiB;QADtC,QAAG,GAAH,GAAG,CAAY;QACzB,UAAK,GAAL,KAAK,CAAgB;QAAU,SAAI,GAAJ,IAAI,CAAa;IAAG,CAAC;IAE9D,mCAAQ,GAAR;QACE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,4BAA4B;QAC5B,mEAAmE;QACnE,YAAY,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC;IAC5C,CAAC;IAED,kEAAkE;IAC5D,sCAAW,GAAjB;;;;;;;wBAEI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;wBACX,qBAAM,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;;wBAArC,OAAO,GAAG,SAA2B;wBAC3C,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;4BACZ,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;4BACvB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;wBACrC,CAAC;wBAED,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;wBAC5B,IAAI,CAAC,gBAAgB,EAAE,CAAC;;;;wBAExB,OAAO,CAAC,GAAG,CAAC,YAAU,OAAO,CAAC,CAAC;;;;;;KAElC;IAED,0EAA0E;IACpE,mCAAQ,GAAd;;;;;;6BACM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAtB,wBAAsB;;;;wBAEtB,qBAAM,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC;;wBAA3C,SAA2C,CAAC;wBAC5C,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;;;;wBAErE,OAAO,CAAC,GAAG,CAAC,YAAU,KAAK,CAAC,CAAC;;;;;;KAGlC;IAED,iHAAiH;IACjH,2EAA2E;IACnE,2CAAgB,GAAxB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,4BAA4B,CAAC;QAC7F,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,GAAG,4BAA4B,CAAC;QACnD,CAAC;IACH,CAAC;IAED,mGAAmG;IACnG,iCAAM,GAAN;QACE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;IAC3B,CAAC;IAEK,oCAAS,GAAf;;;gBACE,IAAG,CAAC;oBACF,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACpC,CAAC;gBAAA,KAAK,CAAC,CAAC,IAAD,CAAC;oBACN,OAAO,CAAC,GAAG,CAAC,oEAAoE,CAAC;gBACnF,CAAC;;;;KACF;IAhEe;QAAf,+DAAS,CAAC,GAAG,CAAC;kCAAW,qDAAM;sDAAC;IAPtB,gBAAgB;QAL5B,+DAAS,CAAC;YACT,QAAQ,EAAE,aAAa;;;SAGxB,CAAC;yCAUyB,gEAAU;YAClB,8DAAc,EAAgB,wEAAW;OAV/C,gBAAgB,CAwE5B;IAAD,uBAAC;CAAA;AAxE4B;;;;;;;;;;;;ACb7B,iCAAiC,yBAAyB,wCAAwC,KAAK,mCAAmC,sBAAsB,sBAAsB,kCAAkC,gCAAgC,kBAAkB,yBAAyB,aAAa,cAAc,KAAK,qCAAqC,yBAAyB,wCAAwC,wBAAwB,yBAAyB,8BAA8B,2BAA2B,KAAK,oCAAoC,0BAA0B,sBAAsB,wBAAwB,yBAAyB,yBAAyB,kBAAkB,KAAK,sCAAsC,kBAAkB,yBAAyB,KAAK,gDAAgD,0BAA0B,KAAK,sCAAsC,sBAAsB,sBAAsB,oCAAoC,6BAA6B,6BAA6B,sBAAsB,4BAA4B,kDAAkD,KAAK,wCAAwC,4BAA4B,KAAK,qDAAqD,sBAAsB,qBAAqB,wBAAwB,yBAAyB,0BAA0B,KAAK,yCAAyC,qBAAqB,yBAAyB,2BAA2B,8BAA8B,2BAA2B,KAAK,wCAAwC,qBAAqB,yBAAyB,2BAA2B,KAAK,K;;;;;;;;;;;ACA1qD,+pBAA+pB,qBAAqB,mFAAmF,iBAAiB,oBAAoB,iBAAiB,+D;;;;;;;;;;;;;;;;;;;;;;;;;ACA3wB;AACc;AAOhE;IAGE,2BAAoB,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;IAAI,CAAC;IAE1C,oCAAQ,GAAR;QACE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC3D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,aAAG,IAAI,UAAG,CAAC,gBAAgB,KAAK,IAAI,EAA7B,CAA6B,CAAC,CAAC;IACjG,CAAC;IARU,iBAAiB;QAL7B,+DAAS,CAAC;YACT,QAAQ,EAAE,cAAc;;;SAGzB,CAAC;yCAI0B,wEAAW;OAH1B,iBAAiB,CAU7B;IAAD,wBAAC;CAAA;AAV6B;;;;;;;;;;;;;;ACR9B;AAAA;IAEI,qBAAY,QAAgB,EAAE,OAAe,EAAE,KAAa,EAAE,KAAsB;QAAtB,sCAAsB;QAWpF,aAAQ,GAAU,IAAI,IAAI,EAAE,CAAC;QAVzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAQL,kBAAC;AAAD,CAAC;;;;;;;;;;;;;;;ACfD;AAAA;IAEI,sBAAY,WAAmB,EAAE,IAAY,EAAE,SAAiB;QAC5D,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,CAAC;IAKL,mBAAC;AAAD,CAAC;;;;;;;;;;;;;;;ACXD;AAAA;IAEI,cAAY,QAAQ,EAAE,QAAQ,EAAE,KAAK;QACjC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAML,WAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZ0C;AAMlB;AAI0B;AAMnD;IACE,mBAAoB,IAAiB,EAAU,MAAc;QAAzC,SAAI,GAAJ,IAAI,CAAa;QAAU,WAAM,GAAN,MAAM,CAAQ;IAAG,CAAC;IAEjE,+BAAW,GAAX,UACE,IAA4B,EAC5B,KAA0B;QAE1B,IAAM,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;QAE5E,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACtC,CAAC;QAED,MAAM,CAAC,UAAU,CAAC,CAAC;;;;;;;;YAQf;IACN,CAAC;IAtBU,SAAS;QAHrB,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;yCAE0B,+DAAW,EAAkB,sDAAM;OADlD,SAAS,CAuBrB;IAAD,gBAAC;CAAA;AAvBqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBqB;AACL;AAEqB;AAChB;AACC;AAI5C;IAaE,qBAAoB,GAAe;QAAnC,iBAWC;QAXmB,QAAG,GAAH,GAAG,CAAY;QAXnC,YAAO,GAAW,IAAI,KAAK,EAAQ,CAAC;QACpC,aAAQ,GAAkB,IAAI,KAAK,EAAe,CAAC;QAKnD,qBAAgB,GAAG,IAAI,CAAC;QAMtB,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC;YACvB,KAAI,CAAC,WAAW,EAAE,CAAC;YACnB,KAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC;gBACrB,KAAI,CAAC,QAAQ,CAAC,IAAI,uDAAI,CAAC,SAAS,EAAE,OAAO,EAAE,4CAA4C,CAAC,CAAC,CAAC;YAC5F,CAAC,CAAC,CAAC;YACH,KAAI,CAAC,wBAAwB,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC;QACH,YAAY;QACZ,sHAAsH;IAExH,CAAC;IAEa,kCAAY,GAA1B;;;;4BACE,qBAAM,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;;wBAA3B,SAA2B,CAAC;wBAC5B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;4BACtB,MAAM,gBAAC;wBACT,CAAC;wBACD,IAAI,CAAC,EAAE,GAAG,IAAI,uDAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;;;;;KACzI;IAED;;;;MAIE;IAGF,6BAAO,GAAP;QACE,MAAM,CAAC,+CAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACrB,CAAC;IAED,gCAAU,GAAV;QACE,MAAM,CAAC,+CAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC1B,CAAC;IAED,8BAAQ,GAAR,UAAS,KAAW;QAClB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;YACtB,MAAM,CAAC;QACT,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QAC/B,CAAC;QACD,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;QACvB,OAAO,CAAC,GAAG,CAAC,WAAW,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IAEK,iCAAW,GAAjB,UAAkB,GAAW;;;;;;wBACrB,CAAC,GAAG,IAAI,sEAAW,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;wBAClF,MAAC;wBAAa,eAAI,CAAC,GAAG,EAAC,aAAa;wBAAC,qBAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC;4BAAjF,qBAAM,cAAuB,SAAoD,EAAE,CAAC,EAAC;;wBAA7F,GAAE,GAAG,GAAG,SAAqF,CAAC;wBAC9F,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;;;;;KACpB;IAEK,mCAAa,GAAnB,UAAoB,OAAoB;;;;;;wBACtC,eAAI,CAAC,GAAG,EAAC,aAAa;wBAAC,qBAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC;;wBAA3E,cAAuB,SAAoD,EAAE,OAAO,EAAC,CAAC;wBACtF,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;;;;;KACzD;IAED,iCAAW,GAAX;QACE,MAAM,CAAC,+CAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC3B,CAAC;IAEa,iCAAW,GAAzB;;;;;4BACE,qBAAM,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;;wBAA3B,SAA2B,CAAC;wBAC5B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;4BACtB,MAAM,gBAAC;wBACT,CAAC;wBACD,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,aAAG,IAAI,UAAG,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,EAAP,CAAO,CAAC,CAAC,OAAO,CAAC,UAAM,KAAK;;;;;wCACzE,eAAI,CAAC,OAAO,EAAC,IAAI;6CAAK,uDAAI;sDAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC;wCAAG,qBAAM,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC;;wCAA3F,cAAkB,cAAI,uDAAI,aAAmC,CAAC,SAA6B,CAAC,CAAC,KAAK,EAAE,KAAK,MAAC,EAAC,CAAC;wCAC5G,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;;;;6BAChC,CAAC,EAHgC,CAGhC,CAAC,CAAC;;;;;KACL;IAEa,oCAAc,GAA5B;;;;gBACE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;gBACzB,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,YAAY,EAAE,EAAnB,CAAmB,CAAC,EAArD,CAAqD,CAAC,CAAC;;;;KACrF;IAEa,oCAAc,GAA5B;;;;;;wBACE,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;wBAC9C,qBAAM,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;;wBAA3B,SAA2B,CAAC;;;;wBAE1B,SAAI;wBAAqB,qBAAM,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;;wBAAtF,GAAK,iBAAiB,GAAG,SAA6D,CAAC;wBACvF,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;wBACzE,qBAAM,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,kBAAkB,CAAC;;wBAAvD,SAAuD,CAAC;;;;wBAExD,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC;wBAErD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;wBAC9C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;wBACzE,qBAAM,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,kBAAkB,CAAC;;wBAAvD,SAAuD,CAAC;wBACxD,qBAAM,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC;;wBAArF,SAAqF,CAAC;;;wBAKxF,OAAO,CAAC,GAAG,CAAC,kBAAgB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,YAAS,CAAC,CAAC;wBAChF,OAAO,CAAC,GAAG,CAAC,oBAAkB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAS,CAAC,CAAC;;;;;KAEpF;IAEa,kCAAY,GAA1B;;;;gBACE,OAAO,CAAC,GAAG,CAAC,iCAA+B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAG;qBAC5E,kBAAgB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAG,EAAC,CAAC;gBAC1E,IAAI,CAAC,GAAG,CAAC,qBAAqB,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,aAAG;oBACtF,GAAG,CAAC,OAAO,CAAC,UAAM,EAAE;;;;wCACJ,qBAAM,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,CAAC;;oCAAzE,KAAK,GAAG,SAAiE;yCACjE,sEAAW;kDAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC;oCAChC,qBAAM,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,CAAC;;oCADvF,CAAC,GAAG,cAAI,sEAAW,aACC,SAAmE;wCACnE,KAAK,MAAC;oCAChC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC;oCACjB,MAAC;oCAAY,qBAAM,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,CAAC;;oCAA7E,GAAE,QAAQ,GAAG,SAAgE,CAAC;oCAC9E,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;;;;yBACpB,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;;;;KAEJ;IAEO,gCAAU,GAAlB,UAAmB,GAAgB;QACjC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;IAED;;;;;;;;;;;MAWE;IAEM,uCAAiB,GAAzB,UAA0B,UAAkB;QAC1C,IAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;QACvB,MAAM,CAAC,UAAU,GAAG,GAAG;YACrB,GAAG,CAAC,cAAc,EAAE,GAAG,GAAG;YAC1B,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG;YAC/C,CAAC,GAAG,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,UAAU,CAAC;IAC1D,CAAC;IAEO,0CAAoB,GAA5B,UAA6B,KAAa;QACxC,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC/B,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAC3C,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC1C,CAAC;QACD,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAChC,CAAC;IAEO,mCAAa,GAArB;QACE,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IACxG,CAAC;IAEO,oCAAc,GAAtB,UAAuB,EAAQ,EAAE,KAAW;QAC1C,MAAM,CAAC,EAAE,CAAC,QAAQ,GAAG,GAAG,GAAG,KAAK,CAAC,QAAQ,CAAC;IAC5C,CAAC;IAEO,kCAAY,GAApB,UAAqB,GAAW;QAC9B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,2CAA2C,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,qCAAqC,EAAE,EAAE,CAAC,CAAC;IACzH,CAAC;IAEK,gCAAU,GAAhB;;;;;wBACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;4BACtB,MAAM,gBAAC;wBACT,CAAC;wBACD,qBAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC;;wBAA9C,SAA8C,CAAC;;;;;KAChD;IAEK,8CAAwB,GAA9B;;;;gBACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;oBACtB,MAAM,gBAAC;gBACT,CAAC;gBACD,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;oBAC1B,KAAI,CAAC,UAAU,EAAE,CAAC;gBACpB,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,sCAAsC;;;;KAClE;IAED,6CAAuB,GAAvB;QACE,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC/B,CAAC;IAEK,uDAAiC,GAAvC,UAAwC,YAA0B;;;;;;wBAChE,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;wBAC/C,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;6BACtB,aAAY,CAAC,IAAI,KAAK,YAAY,GAAlC,wBAAkC;wBACtB,qBAAM,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,CAAC;;wBAAvF,KAAK,GAAG,SAA+E;6BAC7E,sEAAW;sCAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC;wBAChC,qBAAM,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,CAAC;;wBADrG,CAAC,GAAG,cAAI,sEAAW,aACC,SAAiF;4BACjF,KAAK,MAAC;wBAChC,CAAC,CAAC,GAAG,GAAG,YAAY,CAAC,SAAS,CAAC;wBAC/B,MAAC;wBAAY,qBAAM,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,CAAC;;wBAA3F,GAAE,QAAQ,GAAG,SAA8E,CAAC;wBAC5F,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;;;6BAEnB,aAAY,CAAC,IAAI,KAAK,UAAU,GAAhC,wBAAgC;wBAClC,qBAAM,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY,CAAC,WAAW,EAAE,YAAY,CAAC,SAAS,CAAC;;wBAA7F,SAA6F,CAAC;;;;;;KAEjG;IAzNU,WAAW;QADvB,gEAAU,EAAE;yCAcc,uDAAU;OAbxB,WAAW,CA2NvB;IAAD,kBAAC;CAAA;AA3NuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTmB;AAGiB;AAEZ;AAIL;AAO3C,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,kCAAkC,CAAC,CAAC;AACjE,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC;AAC1D,IAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,2BAA2B,CAAC,CAAC;AACxD,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,oCAAoC,CAAC,CAAC;AAClE,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAC;AACxD,IAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,mCAAmC,CAAC,CAAC;AAChE,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,2BAA2B,CAAC,CAAC;AAC1D,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,6CAA6C,CAAC,CAAC;AAC7E,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,qCAAqC,CAAC,CAAC;AACnE,IAAM,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAC;AACtD,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,kCAAkC,CAAC,CAAC;AAChE,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,6BAA6B,CAAC,CAAC;AAC3D,IAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,gCAAgC,CAAC,CAAC;AAC7D,IAAM,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,mDAAmD,CAAC,CAAC;AAE/E,uCAAuC;AACvC,IAAM,cAAc,GAAG,EAAE,CAAC;AAC1B;;;GAGG;AAIH;IAsBE,oBAAoB,MAAqB;QAAzC,iBAKC;QALmB,WAAM,GAAN,MAAM,CAAe;QAnBzC,UAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;QAErB;;;;;;WAMG;QACH,YAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAEvB;;;;;WAKG;QACH,kBAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QASnC;;WAEG;QACH,eAAU,GAAG;;;;;wBACX,SAAI;wBAAW,qBAAM,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;;wBAA5D,GAAK,OAAO,GAAG,SAA6C,CAAC;;;;aAC9D;QAED;;;;;;;;;;WAUG;QACH,sBAAiB,GAAG,UAAC,IAAY,EAAE,KAAc;YAC/C,MAAM,CAAC,KAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QACxD,CAAC;QAED;;;;;WAKG;QACH,qBAAgB,GAAG,UAAC,IAAY,EAAE,KAAc;YAC9C,MAAM,CAAC,KAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QACvD,CAAC;QAED;;;;;WAKG;QACH,oBAAe,GAAG,UAAC,IAAY,EAAE,KAAc;YAC7C,MAAM,CAAC,KAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QACtD,CAAC;QAED,sBAAiB,GAAG,UAAC,IAAY,EAAE,EAAO,EAAE,GAAQ;YAClD,IAAM,UAAU,GAAG,EAAE,CAAC;YACtB,IAAM,SAAS,GAAG,EAAE,CAAC;YACrB,IAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvC,IAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,IAAI,EAAE,CAAC;YAEhF,mDAAmD;YACnD,oEAAoE;YACpE,oEAAoE;YACpE,oEAAoE;YACpE,wFAAwF;YACxF,MAAM,CAAC,GAAG,CAAC,eAAK;gBAEd,IAAM,SAAS,GAAG,KAAK,CAAC,KAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;gBAClD,IAAM,OAAO,GAAG,KAAI,CAAC,cAAc,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;gBAC/C,IAAM,GAAG,GAAG,GAAG,CAAC;gBAEhB,IAAM,UAAU,GAAG,KAAI,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBACnD,IAAM,aAAa,GAAG,KAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;gBAEnE,gIAAgI;gBAChI,EAAE,CAAC,CAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,KAAK,KAAK,OAAO,IAAI,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC7E,KAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;gBAC5E,CAAC;gBAAC,IAAI,CAAC,CAAC;oBAEN,4BAA4B;oBAC5B,EAAE,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACjF,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,aAAa,EAAE,GAAG,CAAC,CAAC,CAAC;wBAChE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC,CAAC;wBAE9D,4BAA4B;oBAC9B,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACzF,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,aAAa,EAAE,GAAG,CAAC,CAAC,CAAC;wBAEhE,6BAA6B;oBAC/B,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACzF,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC,CAAC;oBAChE,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC;gBACL,UAAU,EAAE,UAAU;gBACtB,SAAS,EAAE,SAAS;aACrB,CAAC;QACJ,CAAC;QA+GD,kBAAa,GAAG,UAAO,IAAY;;;;gBAC3B,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBAClC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjE,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;gBAEnD,yBAAyB;gBACzB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC5D,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,UAAC,QAAQ,EAAE,OAAO,EAAE,OAAO;wBACpF,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;4BACZ,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,kDAAkD,EAAE,UAAU,CAAC,CAAC;4BACpF,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;4BAC3B,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;wBAC5B,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,GAAG,OAAO,EAAE,uBAAuB,CAAC,CAAC;wBACpE,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;;;aACF;QAED,eAAU,GAAG;YACX,IAAM,SAAS,GAAG,KAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;YAEvD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACd,MAAM,CAAC;oBACL,QAAQ,EAAE,KAAI,CAAC,iBAAiB,CAAC,UAAU,EAAE,SAAS,CAAC;oBACvD,YAAY,EAAE,KAAI,CAAC,iBAAiB,CAAC,cAAc,EAAE,SAAS,CAAC;oBAC/D,MAAM,EAAE,KAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,SAAS,CAAC;oBACnD,MAAM,EAAE,KAAI,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,SAAS,CAAC;iBAC5D,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;QAED,+EAA+E;QAC/E,aAAQ,GAAG;YACT,IAAM,SAAS,GAAG,KAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;YAErD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACd,MAAM,CAAC,KAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,CAAC;YAED,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;QAED,wHAAwH;QACxH,aAAQ,GAAG;YACT,IAAM,SAAS,GAAG,KAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YAEzD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACd,MAAM,CAAC,KAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YACtE,CAAC;QACH,CAAC;QAED,eAAU,GAAG;;;;;6BAEP,CAAC,IAAI,CAAC,OAAO,EAAb,wBAAa;wBACf,qBAAM,IAAI,CAAC,UAAU,EAAE;;wBAAvB,SAAuB,CAAC;;;;wBAIxB,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;;wBAA3C,SAA2C,CAAC;wBAE5C,sBAAO;gCACL,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;gCAChC,OAAO,EAAE,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC;gCACpD,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE;gCACtB,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gCACpC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC;gCACzC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE;gCAC1B,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE;6BACvB,EAAC;;;wBAEF,OAAO,CAAC,GAAG,CAAC,0BAAwB,OAAO,CAAC,CAAC;;;;;aAEhD;QAvRC,IAAM,cAAc,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAC5D,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACxD,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IA2FO,sCAAiB,GAAzB,UAA0B,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,EAAE,EAAO;QAC9E,qEAAqE;QACrE,IAAM,KAAK,GAAG,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QAEvC,sCAAsC;QACtC,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC;QAE5E,oDAAoD;QACpD,IAAM,YAAY,GAAG,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;QAEvG,oCAAoC;QACpC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC,CAAC;QAEjE,sFAAsF;QACtF,0BAA0B;QAC1B,IAAM,IAAI,GAAG,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QACjF,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;QAE/D,sDAAsD;QACtD,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC,CAAC;IAC9D,CAAC;IAEO,mCAAc,GAAtB,UAAuB,KAAK,EAAE,EAAE;QAC9B,IAAI,SAAiB,CAAC;QACtB,IAAI,GAAQ,CAAC;QAEb,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,OAAO;gBACV,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;gBACnD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBACd,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBAC5B,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,OAAO;gBACV,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;gBAC/C,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBACd,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBAC5B,CAAC;gBACD,KAAK,CAAC;YACR;gBACE,GAAG,GAAG,EAAE,CAAC;gBACT,KAAK,CAAC;QACV,CAAC;QAED,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED;;;;;OAKG;IACK,kCAAa,GAArB,UAAsB,IAAY,EAAE,KAAa;QAC/C,IAAI,UAAe,CAAC;QAEpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACvB,MAAM,CAAC;QACT,CAAC;QAED,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,OAAO;gBACV,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;gBACnD,KAAK,CAAC;YACR,KAAK,OAAO;gBACV,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;gBACrD,KAAK,CAAC;YACR;gBACE,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAC/B,KAAK,CAAC;QACV,CAAC;QAED,MAAM,CAAC,UAAU,CAAC;IACpB,CAAC;IAEO,qCAAgB,GAAxB,UAAyB,KAAK,EAAE,UAAU;QACxC,IAAI,QAAa,CAAC;QAElB,EAAE,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC;QACT,CAAC;QAED,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,OAAO;gBACV,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;gBACjD,KAAK,CAAC;YACR,KAAK,OAAO;gBACV,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;gBACnD,KAAK,CAAC;YACR;gBACE,QAAQ,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;gBAC7B,KAAK,CAAC;QACV,CAAC;QAED,MAAM,CAAC,QAAQ,CAAC;IAClB,CAAC;IAEO,iCAAY,GAApB,UAAqB,KAAK;QACxB,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,SAAS;gBACZ,MAAM,CAAC,mBAAmB,CAAC;YAC7B,KAAK,OAAO,CAAC;YACb,KAAK,OAAO;gBACV,MAAM,CAAC,OAAO,CAAC;YACjB;gBACE,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;IACH,CAAC;IA+ED;;;;;OAKG;IACK,0CAAqB,GAA7B,UAA8B,IAAY,EAAE,SAAc,EAAE,KAAc;QACxE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QACrF,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACV,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC;QACrB,CAAC;QACD,MAAM,CAAC,EAAE,CAAC;IACZ,CAAC;IAGD,wCAAwC;IACxC,wCAAwC;IACxC,wCAAwC;IACxC,wCAAwC;IACxC,wCAAwC;IAExC;;;;;MAKE;IACI,6BAAQ,GAAd,UAAe,IAAS,EAAE,GAAgC;QAAhC,4BAAc,IAAI,CAAC,OAAO,CAAC,KAAK;;;;;;;wBAEhD,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;wBAC9B,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;;wBAAhC,SAAgC,CAAC;wBACjC,sBAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,EAAC;;;wBAGhC,OAAO,CAAC,GAAG,CAAC,0BAAwB,OAAO,CAAC,CAAC;;;;;;KAEhD;IAED;;;;;MAKE;IACI,8BAAS,GAAf,UAAgB,IAAS,EAAE,GAAgC;QAAhC,4BAAc,IAAI,CAAC,OAAO,CAAC,KAAK;;;;;;wBACnD,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;wBAC9B,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;;wBAAhC,SAAgC,CAAC;wBACjC,sBAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,EAAC;;;;KAChC;IAED;;;;MAIE;IACI,+BAAU,GAAhB,UAAiB,GAAgC;QAAhC,4BAAc,IAAI,CAAC,OAAO,CAAC,KAAK;;;gBAC/C,sBAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC,EAAC;;;KAC1C;IAED;;;;MAIE;IACI,4BAAO,GAAb,UAAc,GAAgC;QAAhC,4BAAc,IAAI,CAAC,OAAO,CAAC,KAAK;;;gBAC5C,sBAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAC;;;KACzC;IAED;;;;MAIE;IACI,gCAAW,GAAjB,UAAkB,KAAkC;QAAlC,gCAAgB,IAAI,CAAC,OAAO,CAAC,KAAK;;;gBAClD,sBAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,KAAK,CAAC,EAAC;;;KAC5C;IAED;;;;MAIE;IACI,qCAAgB,GAAtB,UAAuB,KAAkC;QAAlC,gCAAgB,IAAI,CAAC,OAAO,CAAC,KAAK;;;;;;wBAChD,SAAI,CAAC,QAAQ;8BAAC,GAAG,CAAC,UAAU,CAAC;wBAAG,qBAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;4BAApE,sBAAO,aAAI,aAA2B,CAAC,SAA6B,CAAC,CAAC,KAAK,GAAC,EAAC;;;;KAC9E;IAED;;;;;;;OAOG;IACH,0CAAqB,GAArB,UAAsB,IAAY,EAAE,KAAa,EAAE,GAAW,EAAE,OAAe;QAC7E,MAAM,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,UAAU,CAAC;IAC3E,CAAC;IAED;;;;;OAKG;IACG,0CAAqB,GAA3B,UAA4B,WAAmB,EAAE,OAAe;;;;;;wBACxD,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;wBACtC,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;;wBAAhC,SAAgC,CAAC;wBAC3B,QAAQ,GAAG,OAAO,GAAG,iBAAiB,CAAC;wBACvC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;wBACf,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC;;wBAAjF,eAAe,GAAG,CAAC,SAA8D,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,EAAR,CAAQ,CAAC;wBAC3G,sBAAO,eAAe,EAAC;;;;KACxB;IAED;;;;;MAKE;IACI,oCAAe,GAArB,UAAsB,MAAc,EAAE,WAAmB;;;;;;wBACjD,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;wBACjC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;wBAC7C,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,EAAC,KAAK,EAAE,IAAI,EAAE,iBAAiB,EAAE,IAAI,EAAC,CAAC;;wBAA/E,SAA+E,CAAC;wBAC/D,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC;;wBAA/E,QAAQ,GAAG,SAAoE;wBACrF,sBAAO,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAC;;;;KACjC;IAED;;;;;MAKE;IACI,mCAAc,GAApB,UAAqB,MAAc,EAAE,WAAmB;;;;;;wBAChD,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;wBACjC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;wBAC7C,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;;wBAAvC,SAAuC,CAAC;wBACxB,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC;;wBAAjF,OAAO,GAAG,SAAuE;wBACvF,sBAAO,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAC;;;;KAC1C;IAED;;;;;MAKE;IACI,sCAAiB,GAAvB,UAAwB,MAAc,EAAE,WAAmB;;;;;;wBACnD,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;wBACjC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;wBAC7C,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;;wBAAvC,SAAuC,CAAC;wBACrB,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC;;wBAAnF,UAAU,GAAG,SAAsE;wBACzF,sBAAO,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAC;;;;KACnC;IAED;;;;;MAKE;IACI,kCAAa,GAAnB,UAAoB,OAAe,EAAE,UAAkB;;;;;;wBAC/C,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;wBACrD,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;;wBAAhC,SAAgC,CAAC;wBAC3B,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAC3B,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC;;wBAArE,KAAK,GAAG,SAA6D;wBAC3E,sBAAO,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAC;;;;KAC/B;IAED;;;;;MAKE;IACI,kCAAa,GAAnB,UAAoB,WAAmB,EAAE,OAAoB;;;;gBACrD,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;gBACzD,QAAQ,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,iBAAiB,CAAC;gBAC5E,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACnC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAEvC,GAAG,GAAG,EAAE,CAAC;gBAET,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;gBAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;gBAC/B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBAC9E,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBAC5E,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBAExF,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,SAAS,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBAGxE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,UAAC,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ;oBACxD,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;wBACP,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;oBAC9B,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;oBAC7B,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEG,UAAU,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;gBAEtE,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;gBAC5D,sBAAO,MAAM,EAAC;;;KACf;IAED;;;;;MAKE;IACI,kCAAa,GAAnB,UAAoB,WAAmB,EAAE,OAAoB;;;;gBACrD,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC;gBACrB,QAAQ,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,iBAAiB,CAAC;gBAC5E,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACnC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAEvC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;gBAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;gBACzB,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;gBAE/E,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,WAAW,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,iBAAO;oBACtF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACrB,CAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,UAAC,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ;oBACzD,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;wBACP,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAG,OAAO,CAAC,OAAO,GAAG,IAAI,GAAG,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;oBACrF,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;oBAC7B,CAAC;gBACH,CAAC,CAAC,CAAC;;;;KACJ;IAED;;;;;OAKG;IACH,gCAAW,GAAX,UAAY,WAAmB,EAAE,QAAc;QAC7C,IAAM,MAAM,GAAG,WAAW,GAAG,MAAM,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC;QACzD,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAChD,CAAC;IAED;;;;MAIE;IACI,gCAAW,GAAjB,UAAkB,WAAmB,EAAE,QAAa;;;;gBAC5C,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;gBAC1C,IAAI,CAAC,aAAa,CAAC,2BAA2B,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAC,CAAC;;;;KACvE;IAED;;;MAGE;IACI,8BAAS,GAAf,UAAgB,QAAgB;;;;;4BAC9B,qBAAM,IAAI,CAAC,UAAU,EAAE;;wBAAvB,SAAuB,CAAC;wBAClB,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;wBAC7D,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;wBACxC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;wBAC3C,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;;wBAAxC,SAAwC,CAAC;wBAE1B,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,yBAAyB,CAAC,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC;;wBAA7F,MAAM,GAAG,SAAoF;wBAGnG,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,QAAQ,KAAK,EAAE,CAAC,CAAC,CAAC;4BACzC,IAAI,CAAC;gCACG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;gCAE9D,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,UAAC,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,QAAQ;oCAC5D,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;wCACP,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;oCAC9B,CAAC;oCAAC,IAAI,CAAC,CAAC;wCACN,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;oCACjC,CAAC;gCACH,CAAC,CAAC,CAAC;4BACL,CAAC;4BAAC,KAAK,CAAC,CAAC,IAAD,CAAC;gCACP,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;4BAC7C,CAAC;wBACH,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;wBAC7C,CAAC;;;;;KACF;IAED;;;;;MAKE;IACI,kCAAa,GAAnB,UAAoB,OAAe,EAAE,UAAkB,EAAE,UAAkB;;;;;;;wBACnE,YAAY,GAAG,UAAU,GAAG,YAAY,CAAC;wBACzC,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC;wBAEzB,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,GAAG,MAAM,GAAG,GAAG,CAAC,CAAC;wBACxD,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,GAAG,OAAO,CAAC,CAAC;wBACpD,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,GAAG,oBAAoB,CAAC,CAAC;wBAClE,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;wBACnC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAExC,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;wBAEtB,GAAG,GAAG,EAAE,CAAC;wBAET,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;wBACzC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;wBACxD,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAClD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;wBAGpC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBACzE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAC7E,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,UAAU,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAC/E,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,CAAC,iBAAiB,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAEhF,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAChF,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBACzE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAC1E,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,cAAc,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAC9E,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBACjF,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,mBAAmB,CAAC,EAAE,WAAW,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAGrF,qBAAM,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,aAAa,EAAE,UAAC,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,QAAQ;gCAC3F,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oCACP,OAAO,CAAC,GAAG,CAAC,WAAS,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,4BAAuB,OAAO,OAAI,CAAC,CAAC;gCACjF,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,OAAO,CAAC,KAAK,CAAC,WAAS,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,mCAA8B,OAAO,OAAI,CAAC,CAAC;gCAC1F,CAAC;4BACH,CAAC,CAAC;;wBANF,SAME,CAAC;wBAEG,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,UAAU,EAAE,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;wBAExF,qBAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,EAAE,UAAC,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,QAAQ;gCACvE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oCACP,OAAO,CAAC,GAAG,CAAC,4BAA0B,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,gCAA2B,OAAO,OAAI,CAAC,CAAC;gCACtG,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,OAAO,CAAC,GAAG,CAAC,4BAA0B,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,sCAAiC,OAAO,OAAI,CAAC,CAAC;gCAC5G,CAAC;4BACH,CAAC,CAAC;;wBANF,SAME,CAAC;wBACH,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;wBACrD,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC,CAAE,6DAA6D;;;;;KACvH;IAED;;;MAGE;IACI,yCAAoB,GAA1B,UAA2B,GAAW;;;;;;wBAC9B,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;wBAClC,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;wBAC1C,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBACjD,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;;wBAA5C,SAA4C,CAAC;wBAC7B,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,aAAa,CAAC,GAAG,EAAE,CAAC;;wBAA3F,OAAO,GAAG,SAAiF;6BAE7F,QAAO,CAAC,MAAM,KAAK,CAAC,GAApB,wBAAoB;wBACtB,OAAO,CAAC,GAAG,CAAC,oBAAkB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,qBAAgB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,gCAA6B,CAAC,CAAC;wBAChI,qBAAM,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,aAAa,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;wBAA1F,SAA0F,CAAC;wBAC3F,OAAO,CAAC,GAAG,CAAC,oBAAkB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,qBAAgB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,cAAW,CAAC,CAAC;;;wBAE9G,OAAO,CAAC,GAAG,CAAC,oBAAkB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,qBAAgB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,+BAA4B,CAAC,CAAC;;;;;;KAElI;IAED;;;MAGE;IACI,oCAAe,GAArB,UAAsB,GAAW;;;;;;wBAC/B,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;wBACnC,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACvB,CAAC,GAAG,CAAC;;;6BAAE,EAAC,GAAG,CAAC;wBACb,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;wBAChE,OAAO,CAAC,GAAG,CAAC,0BAAwB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,MAAG,CAAC,CAAC;wBAClE,qBAAM,8DAAuB,CAAC,MAAM,CAAC;;wBAArC,SAAqC,CAAC;;;wBAHjB,CAAC,EAAE;;;wBAK1B,OAAO,CAAC,GAAG,CAAC,mDAAmD,CAAC,CAAC;wBACjE,qBAAM,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC;;wBAApC,SAAoC,CAAC;;;;;KACtC;IAED;;;MAGE;IACF,iCAAY,GAAZ,UAAa,GAAW;QACtB,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,2CAA2C,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,qCAAqC,EAAE,EAAE,CAAC,CAAC;IACzH,CAAC;IAED;;;;OAIG;IACG,qCAAgB,GAAtB,UAAuB,KAAa,EAAE,aAAqB,EAAE,UAAkB;;;;;4BAC3D,qBAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC;;wBAA9C,QAAQ,GAAG,CAAC,SAAkC,CAAC,CAAC,KAAK;wBACrD,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,yBAAyB,CAAC,CAAC;wBAEhE,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;wBAC/C,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;wBAEpC,GAAG,GAAG,EAAE,CAAC;wBAEf,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,cAAc,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAEhF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;;;;;KAEtC;IAED;;;;;OAKG;IACG,wCAAmB,GAAzB,UAA0B,KAAa,EAAE,aAAqB,EAAE,UAAkB;;;;;4BAC9D,qBAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;;wBAAzC,QAAQ,GAAG,CAAC,SAA6B,CAAC,CAAC,KAAK;wBAChD,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,yBAAyB,CAAC,CAAC;wBAChE,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAC5C,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;wBAE/C,GAAG,GAAG,EAAE,CAAC;wBAEf,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,EAAE,cAAc,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBAEtF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;;;;;KACtC;IACD;;;;OAIG;IACG,qCAAgB,GAAtB,UAAuB,QAAgB,EAAE,GAAe;;;;gBAChD,OAAO,GAAG,QAAQ,GAAG,yBAAyB,CAAC;gBAE/C,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBACnC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAG7C,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;oBACzB,MAAM,EAAE,MAAM;oBACd,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;iBACb,CAAC,CAAC;;;;KA+BJ;IAED;;;;OAIG;IACG,mCAAc,GAApB,UAAqB,WAAmB,EAAE,KAAa,EAAE,UAAkB;;;;;;;wBACnE,MAAM,GAAG,WAAW,GAAG,OAAO,CAAC;wBAC/B,MAAM,GAAG,MAAM,GAAG,mBAAmB,CAAC;wBACtC,IAAI,GAAG,MAAM,GAAG,OAAO,CAAC;wBACxB,KAAK,GAAG,MAAM,GAAG,YAAY,CAAC;wBAC9B,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;wBACjC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;wBACjC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAC7B,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;wBAC/B,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC;wBACzC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;wBAClC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAE5C,GAAG,GAAG,EAAE,CAAC;wBAEf,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,eAAe,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC7E,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,EAAE,cAAc,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBACrE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC9D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBACnE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBACpE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBACjE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAElE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,eAAe,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC3E,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBACvE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC5D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBACjE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAE/D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,eAAe,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC5E,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC/D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC7D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAClE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAChE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;wBAG3D,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;wBAClF,qBAAM,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,aAAa,EAAE,UAAC,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,QAAQ;gCAC9F,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oCACP,OAAO,CAAC,GAAG,CAAC,WAAS,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,4BAAuB,OAAO,OAAI,CAAC,CAAC;gCACjF,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,OAAO,CAAC,KAAK,CAAC,WAAS,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,mCAA8B,OAAO,OAAI,CAAC,CAAC;gCAC1F,CAAC;4BACH,CAAC,CAAC;;wBANF,SAME,CAAC;;;;;KACJ;IAED;;;;OAIG;IACG,+BAAU,GAAhB,UAAiB,KAAa,EAAE,MAAmB;;;;;;;wBACjD,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;wBACjC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;wBACF,qBAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;;wBAAxC,QAAQ,GAAG,SAA6B;wBACxC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;wBAEvC,SAAS,GAAwB,EAAE,CAAC;wBAC1C,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,EAAE,EAAC,KAAK,EAAE,IAAI,EAAE,iBAAiB,EAAE,IAAI,EAAC,CAAC;;wBAAlF,SAAkF,CAAC;wBAC9D,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC;;wBAA9F,WAAW,GAAG,CAAC,SAA+E,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,OAAO,EAAT,CAAS,CAAC;wBACzH,OAAO,CAAC,GAAG,CAAC,yBAAuB,WAAW,CAAC,MAAQ,CAAC,CAAC;wBACzD,qBAAM,WAAW,CAAC,OAAO,CAAC,UAAM,OAAO;;;;;iDACjC,eAAc,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAtC,wBAAsC;4CACxC,OAAO,CAAC,GAAG,CAAC,mBAAiB,OAAS,CAAC,CAAC;4CACxC,qBAAM,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAM,MAAM;;;;qEACnD,OAAM,CAAC,IAAI,KAAK,MAAM,GAAtB,wBAAsB;gEACxB,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gEACvB,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;gEACjC,qBAAM,MAAM,CAAC,iCAAiC,CAAC,MAAM,CAAC;;gEAAtD,SAAsD,CAAC;;;gEAEvD,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,qDAAqD;;;;;qDAEtF,CAAC;;4CARF,SAQE,CAAC;;;;;iCAEN,CAAC;;wBAbF,SAaE,CAAC;wBACH,OAAO,CAAC,GAAG,CAAC,aAAW,WAAW,CAAC,MAAM,sBAAmB,CAAC,CAAC;;;;;KAC/D;IAED;;;;OAIG;IACG,wCAAmB,GAAzB,UAA0B,eAAuB;;;;;;;wBAC/C,OAAO,CAAC,GAAG,CAAC,qBAAmB,eAAiB,CAAC,CAAC;wBAGlD,qBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC,IAAI,CAAC,UAAM,GAAG;;;;;iDACtE,IAAG,CAAC,MAAM,KAAK,GAAG,GAAlB,wBAAkB;;;4CAEd,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC;4CACxB,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;;;;4CAEpC,qBAAM,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,GAAG,EAAE,aAAa,CAAC;;4CAA1D,SAA0D,CAAC;4CAC7C,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;;4CAA3E,OAAO,GAAG,SAAiE;iDAC3E,QAAO,CAAC,MAAM,GAAG,CAAC,GAAlB,wBAAkB;4CACpB,YAAY,GAAG,IAAI,uEAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;gDAEvF,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;;4CAAxE,OAAO,GAAG,SAA8D,CAAC;4CACzE,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gDACvB,YAAY,GAAG,IAAI,uEAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;4CACjG,CAAC;4CAAC,IAAI,CAAC,CAAC;gDACN,YAAY,GAAG,IAAI,uEAAY,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;4CAC5D,CAAC;;;;;4CAGH,YAAY,GAAG,IAAI,uEAAY,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;4CAC1D,OAAO,CAAC,GAAG,CAAC,0BAAwB,eAAiB,CAAC,CAAC;;;;;iCAG5D,CAAC;;wBAvBF,SAuBE,CAAC;wBACH,sBAAO,YAAY,EAAC;;;;KACrB;IAED;;;OAGG;IACG,uCAAkB,GAAxB,UAAyB,eAAuB;;;;;wBAC9C,OAAO,CAAC,GAAG,CAAC,mBAAiB,eAAiB,CAAC,CAAC;wBAChD,qBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAE,eAAe,CAAC;iCAC7C,IAAI,CAAC,WAAC;gCACL,OAAO,CAAC,GAAG,CAAC,kBAAgB,eAAiB,CAAC,CAAC;4BACjD,CAAC,CAAC;;wBAHpB,SAGoB,CAAC;;;;;KACtB;IAEK,kCAAa,GAAnB,UAAoB,OAAe,EAAE,UAAkB,EAAE,UAAkB;;;;;;;wBACnE,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;wBACzD,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAC5C,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAElD,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,EAAC,KAAK,EAAE,IAAI,EAAE,iBAAiB,EAAE,IAAI,EAAC,CAAC;;wBAAjF,SAAiF,CAAC;wBAE5E,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,cAAc,EAAE,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;wBAE5F,qBAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,EAAE,UAAC,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,QAAQ;gCACvE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oCACP,OAAO,CAAC,GAAG,CAAC,4BAA0B,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,gCAA2B,OAAO,OAAI,CAAC,CAAC;gCACtG,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,OAAO,CAAC,GAAG,CAAC,4BAA0B,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,sCAAiC,OAAO,OAAI,CAAC,CAAC;gCAC5G,CAAC;4BACH,CAAC,CAAC;;wBANF,SAME,CAAC;;;;;KAEJ;IAp6BU,UAAU;QAHtB,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;yCAuB4B,wDAAa;OAtB9B,UAAU,CAs6BtB;IAAD,iBAAC;CAAA;AAt6BsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCoB;AACF;AACD;AAgBxC;IAUE,qBAAoB,MAAc;QAAlC,iBAEC;QAFmB,WAAM,GAAN,MAAM,CAAQ;QARlC,aAAQ,GAAG;YACT,MAAM,EAAE,OAAO;YACf,OAAO,EAAE;gBACP,cAAc,EAAE,2BAA2B;aAC5C;YACD,IAAI,EAAE,EAAE;SACT,CAAC;QAMF;;UAEE;QACF,oBAAe,GAAG;;gBAChB,IAAI,CAAC,OAAO,GAAG,iDAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;;;aAClD;QAED;;;;WAIG;QACH,oBAAe,GAAG;;;;;;wBAEd,qBAAM,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,eAAe,EAAC,CAAC;;wBAAzD,SAAyD,CAAC;wBAC1D,qDAAqD;wBACrD,qBAAM,IAAI,CAAC,eAAe,EAAE;;wBAD5B,qDAAqD;wBACrD,SAA4B,CAAC;wBAE7B,yCAAyC;wBACzC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;;;;wBAEhC,OAAO,CAAC,GAAG,CAAC,YAAU,OAAO,CAAC,CAAC;;;;;aAElC;QAED;;UAEE;QACF,iBAAY,GAAG;;;;;;wBAEX,qBAAM,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;;wBAAzB,SAAyB,CAAC;wBAC1B,sBAAsB;wBACtB,YAAY,CAAC,UAAU,CAAC,mBAAmB,CAAC,CAAC;wBAC7C,yBAAyB;wBACzB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;;;;wBAE5B,OAAO,CAAC,GAAG,CAAC,YAAU,OAAO,CAAC,CAAC;;;;;aAElC;QAED,oBAAe,GAAG,UAAC,OAAY;YAC7B,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;gBAC5C,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YAClE,CAAC;QACH,CAAC;QAED,mBAAc,GAAG;YACf,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC5D,CAAC;QAED;;;;UAIE;QACF,eAAU,GAAG,UAAO,GAAW;;;4BAC7B,qBAAM,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE;4BAC1B,WAAW,EAAK,MAAM,CAAC,QAAQ,CAAC,IAAI,SAAM;4BAC1C,OAAO,EAAE,YAAY;yBACtB,CAAC;;wBAHF,SAGE,CAAC;;;;aACJ;QA/DC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAgED;;;;OAIG;IACH,0CAAoB,GAApB;QACE,IAAM,cAAc,GAAkB;YACpC,IAAI,EAAE,QAAQ;YACd,KAAK,EAAE,2BAA2B;YAClC,QAAQ,EAAE,yBAAyB;YACnC,IAAI,EAAE,sBAAsB;SAC7B,CAAC;QACF,IAAM,sBAAsB,GAAkB;YAC5C,IAAI,EAAE,iBAAiB;YACvB,KAAK,EAAE,0BAA0B;YACjC,QAAQ,EAAE,yBAAyB;YACnC,IAAI,EAAE,8CAA8C;SACrD,CAAC;QACF,IAAM,aAAa,GAAkB;YACnC,IAAI,EAAE,qBAAqB;YAC3B,KAAK,EAAE,4BAA4B;YACnC,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,kBAAkB;SACzB,CAAC;QAEF,MAAM,CAAC;YACL,cAAc;YACd,sBAAsB;YACtB,aAAa;SACd,CAAC;IACJ,CAAC;IA1GU,WAAW;QAHvB,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;yCAW4B,sDAAM;OAVvB,WAAW,CA2GvB;IAAD,kBAAC;CAAA;AA3GuB;;;;;;;;;;;;;;AClBxB;AAAA,gFAAgF;AAChF,2EAA2E;AAC3E,gEAAgE;AAEzD,IAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;GAKG;AACH,mEAAmE;;;;;;;;;;;;;;;;;;ACdpB;AAC4B;AAE9B;AACY;AAEzD,EAAE,CAAC,CAAC,qEAAW,CAAC,UAAU,CAAC,CAAC,CAAC;IAC3B,oEAAc,EAAE,CAAC;AACnB,CAAC;AAED,gGAAsB,EAAE,CAAC,eAAe,CAAC,yDAAS,CAAC;KAChD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC","file":"main.js","sourcesContent":["var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\"","module.exports = \"<div class=\\\"chatRoom\\\">\\r\\n    <div class=\\\"chatHeaderWrapper\\\">\\r\\n      <app-navbar></app-navbar>\\r\\n    </div>\\r\\n    <router-outlet></router-outlet>\\r\\n</div>\"","import { Component } from '@angular/core';\r\n\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'De-Chat';\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\n// Components\r\nimport { AppComponent } from './app.component';\r\nimport { LoginPopupComponent } from './components/login-popup/login-popup.component';\r\nimport { LoginComponent } from './components/login/login.component';\r\nimport { RegisterComponent } from './components/register/register.component';\r\nimport { ProfileComponent } from './components/profile/profile.component';\r\nimport { ChatFormComponent } from './components/chat-form/chat-form.component';\r\nimport { ChatComponent } from './components/chat/chat.component';\r\nimport { FeedComponent } from './components/feed/feed.component';\r\nimport { MessageComponent } from './components/message/message.component';\r\nimport { NavbarComponent } from './components/navbar/navbar.component';\r\nimport { FriendItemComponent } from './components/friend-item/friend-item.component';\r\nimport { FriendListComponent } from './components/friend-list/friend-list.component';\r\n\r\n// Services\r\nimport { AuthService } from './services/solid.auth.service';\r\nimport { ChatService } from './services/chat.service';\r\nimport { AuthGuard } from './services/auth.guard.service';\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ToastrModule } from 'ngx-toastr';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginComponent\r\n  },\r\n  {\r\n    path: 'login',\r\n    component: LoginComponent\r\n  },\r\n  {\r\n    path: 'login-popup',\r\n    component: LoginPopupComponent\r\n  },\r\n  {\r\n    path: 'profile',\r\n    component: ProfileComponent,\r\n    canActivate: [AuthGuard],\r\n  },\r\n  {\r\n    path: 'chat',\r\n    component: ChatComponent,\r\n    canActivate: [AuthGuard],\r\n  },\r\n\r\n  {\r\n    path: 'register',\r\n    component: RegisterComponent\r\n  }\r\n\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    LoginComponent,\r\n    LoginPopupComponent,\r\n    ProfileComponent,\r\n    RegisterComponent,\r\n    ChatFormComponent,\r\n    ChatComponent,\r\n    FeedComponent,\r\n    MessageComponent,\r\n    NavbarComponent,\r\n    FriendItemComponent,\r\n    FriendListComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    RouterModule.forRoot(routes),\r\n    NgSelectModule,\r\n    ToastrModule.forRoot(),\r\n    BrowserAnimationsModule // required for toastr\r\n  ],\r\n  providers: [AuthService , ChatService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","module.exports = \".chatInput{\\r\\n    width: 81%;\\r\\n    border-radius: 0.313em;\\r\\n    position: relative;\\r\\n    top: 10%;\\r\\n    left: 2%;\\r\\n    margin: 0.100em;\\r\\n    padding: 0.100em;\\r\\n    font-size: 1.300em;\\r\\n    font-family: 'Open Sans', sans-serif;\\r\\n    background-color: #eee;\\r\\n    color: #000;\\r\\n    transition: 0.1s ease-out;\\r\\n}\\r\\n\\r\\n.chatInput:focus{\\r\\n    background-color: #E4F1FE;\\r\\n    color: #222;\\r\\n    transition: 0.2s ease-in;\\r\\n}\\r\\n\\r\\n.chatButton{\\r\\n    position: relative;\\r\\n    right: 2%; \\r\\n    left: 3%;\\r\\n    top: 10%; \\r\\n    min-width: 6.875em;\\r\\n    width: 12%;\\r\\n    border-radius: 0.313em;\\r\\n    margin: 0.000em;\\r\\n    padding: 0.325em;\\r\\n    padding: 0.300em 1.300em;\\r\\n    font-size: 1.300em;\\r\\n    font-family: 'Droid Sans', sans-serif;\\r\\n    background-color: rgb(13, 6, 104);\\r\\n    color: white;\\r\\n    transition: 0.2s ease-out;\\r\\n    min-width: 3.125em;\\r\\n}\\r\\n\\r\\n.chatButton:hover{\\r\\n    background-color: #444;\\r\\n}\\r\\n\\r\\n.divForm{\\r\\n    position: -webkit-sticky;\\r\\n    position: sticky;\\r\\n    width: 100%;\\r\\n    top: 10%;\\r\\n    padding: 0.325em;\\r\\n    padding: 0.300em 1.300em;\\r\\n}\"","module.exports = \"<div class=\\\"divForm\\\">\\r\\n<input \\r\\n    class=\\\"chatInput\\\" \\r\\n    [(ngModel)]=\\\"message\\\" \\r\\n    (keydown)=\\\"handleSubmit($event)\\\"\\r\\n    placeholder = \\\"Write message here...\\\"/>\\r\\n\\r\\n<button class=\\\"chatButton\\\" id=\\\"send\\\" (click)=send()>Send</button>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { ChatService } from '../../services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-form',\r\n  templateUrl: './chat-form.component.html',\r\n  styleUrls: ['./chat-form.component.css']\r\n})\r\nexport class ChatFormComponent implements OnInit {\r\n  message: string;\r\n\r\n  constructor(private chat: ChatService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  send() {\r\n    this.chat.sendMessage(this.message);\r\n    this.message = '';\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    if (event.keyCode === 13) {\r\n      this.send();\r\n    }\r\n  }\r\n}\r\n","module.exports = \".mainContent{\\r\\n    display: flex;\\r\\n    height: calc(100vh - 6.250em);\\r\\n}\\r\\n\\r\\n.userListWrapper {\\r\\n    background-color: rgb(45, 72, 107);\\r\\n    color: #fff;\\r\\n    display: flex;\\r\\n    font-family: \\\"Open Sans\\\", sans-serif;\\r\\n    font-size: 1.200em;\\r\\n    flex: 1;\\r\\n    order: 1;\\r\\n    padding: 1.250em 0.000em 2.500em 1.875em;\\r\\n    border-right: 1px solid #222;\\r\\n    overflow: auto;\\r\\n    overflow-x: hidden;\\r\\n}\\r\\n\\r\\n.feedWrapper {\\r\\n    background-color: #fff;\\r\\n    background: \\r\\n        linear-gradient(181deg, rgba(40, 180, 255, 0.6), rgba(1, 15, 78, 0.9)),\\r\\n        url('Solid_Pattern.png') center center no-repeat;\\r\\n    font-family: \\\"Open Sans\\\", sans-serif;\\r\\n    font-size: 1.200em;\\r\\n    flex: 5;\\r\\n    order: 2;\\r\\n    overflow-y: auto;\\r\\n    padding: 1.250em 0.000em 0.000em 1.500em;\\r\\n}\\r\\n\\r\\n.chatFormWrapper {\\r\\n    height: 3.125em;\\r\\n    background-color: rgb(20, 96, 236);\\r\\n    overflow: hidden;\\r\\n    position: -webkit-sticky;\\r\\n    position: sticky;\\r\\n}\\r\\n\\r\\n#scroll-style::-webkit-scrollbar-track{\\r\\n\\tborder-radius: 0.625em;\\r\\n\\tbackground-color: #F5F5F5;\\r\\n}\\r\\n\\r\\napp-user-list {\\r\\n    width: 100%;\\r\\n}\"","module.exports = \"<div class=\\\"mainContent\\\">\\r\\n  <div class=\\\"userListWrapper\\\">\\r\\n    <app-friend-list></app-friend-list>\\r\\n  </div>\\r\\n  <div #scroller class=\\\"feedWrapper\\\">\\r\\n    <app-feed></app-feed>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"chatFormWrapper\\\">\\r\\n  <app-chat-form></app-chat-form>\\r\\n</div>\"","import { Component, OnInit, ViewChild, ElementRef, AfterViewChecked } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-chatroom',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.css']\r\n})\r\nexport class ChatComponent implements OnInit, AfterViewChecked {\r\n  @ViewChild('scroller') private feedContainer: ElementRef;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  scrollToBottom(): void {\r\n    this.feedContainer.nativeElement.scrollTop\r\n    = this.feedContainer.nativeElement.scrollHeight;\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    this.scrollToBottom();\r\n  }\r\n}\r\n","module.exports = \".feed{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n}\\r\\n\\r\\n.message{\\r\\n    flex-direction: column;\\r\\n    margin: 0.625em 0;\\r\\n}\"","module.exports = \"<div class=\\\"feed\\\">\\r\\n  <div *ngFor=\\\"let message of feed | async\\\" class=\\\"message\\\">\\r\\n    <app-message [chatMessage]=message></app-message>\\r\\n  </div>\\r\\n</div>\"","import { Component, OnInit, OnChanges } from '@angular/core';\r\nimport { ChatService } from '../../services/chat.service';\r\nimport { Observable } from 'rxjs';\r\nimport { ChatMessage } from '../../models/chat-message.model';\r\n\r\n@Component({\r\n  selector: 'app-feed',\r\n  templateUrl: './feed.component.html',\r\n  styleUrls: ['./feed.component.css']\r\n})\r\nexport class FeedComponent implements OnInit, OnChanges {\r\n  feed: Observable<ChatMessage[]>;\r\n\r\n  constructor(private chat: ChatService) {}\r\n\r\n  ngOnInit() {\r\n\r\n    this.feed = this.chat.getMessages();\r\n\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.feed = this.chat.getMessages();\r\n  }\r\n\r\n}\r\n","module.exports = \".userItem{\\r\\n    height: auto;\\r\\n    padding: 0.625em;\\r\\n    width: 90%;\\r\\n    margin-top: 0.625em;\\r\\n    border-radius: 0.063em;\\r\\n    align-items: flex-start;\\r\\n    background-color: #4171a5;\\r\\n    box-shadow: 0 0.188em 0.375em rgba(0,0,0,0.16), 0 0.188em 0.375em rgba(0,0,0,0.23);\\r\\n    color: #A098A5;\\r\\n    border-radius: 0.500em;\\r\\n    transition: ease-in 0.2s;\\r\\n}\\r\\n\\r\\n.userItem:hover{\\r\\n    background-color: #2c3a68;\\r\\n    color: #ddd;\\r\\n    transition: ease-in 0.1s;\\r\\n}\\r\\n\\r\\n.online{\\r\\n    background-color: #0FA;\\r\\n}\\r\\n\\r\\n.busy{\\r\\n    background-color: #FB0;\\r\\n}\\r\\n\\r\\n.offline{\\r\\n    background-color: #888;\\r\\n}\\r\\n\\r\\n.status{\\r\\n    border: 0.063em solid black;\\r\\n    display: inline-block;\\r\\n    min-width: 0.625em;\\r\\n    min-height: 0.625em;\\r\\n    border-radius: 50%;\\r\\n    margin: 0.625em 0.750em 0.000em 0.625em;\\r\\n}\\r\\n\\r\\n.userName{\\r\\n    display: contents;\\r\\n}\\r\\n\\r\\n.userItemCurrent{\\r\\n    height: auto;\\r\\n    padding: 0.625em;\\r\\n    width: 100%;\\r\\n    margin-top: 0.625em;\\r\\n    border-radius: 0.063em;\\r\\n    align-items:flex-start;\\r\\n    box-shadow: 0 0.188em 0.375em rgba(0,0,0,0.16), 0 0.188em 0.375em rgba(0,0,0,0.23);\\r\\n    border-radius: 0.500em;\\r\\n    transition: ease-in 0.2s;\\r\\n    background-color: #1f2f8a;\\r\\n    color: #ddd;\\r\\n}\"","module.exports = \"<div (click)=\\\"userClicked()\\\" [ngClass]=\\\"{userItemCurrent: (user.isCurrent), userItem: (!user.isCurrent)}\\\">\\r\\n  <span class=\\\"status\\\" [ngClass]=(user.status)>\\r\\n  </span>\\r\\n  <span class=\\\"userName\\\">\\r\\n    {{user.fullName}}\\r\\n  </span>\\r\\n</div>\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { ChatService } from '../../services/chat.service';\r\nimport { User } from '../../models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-friend-item',\r\n  templateUrl: './friend-item.component.html',\r\n  styleUrls: ['./friend-item.component.css']\r\n})\r\nexport class FriendItemComponent implements OnInit {\r\n\r\n  @Input() user: User = new User('userdepruebas', 'Pruebas User', 'http://prueba.user/webid');\r\n\r\n  constructor(private cService: ChatService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  userClicked() {\r\n    this.cService.setOther(this.user);\r\n  }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"userList\\\">\\r\\n  <app-friend-item\\r\\n  [user]=user *ngFor=\\\"let user of users\\\">\\r\\n  </app-friend-item>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { User } from '../../models/user.model';\r\nimport { ChatService } from '../../services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-friend-list',\r\n  templateUrl: './friend-list.component.html',\r\n  styleUrls: ['./friend-list.component.css']\r\n})\r\nexport class FriendListComponent {\r\n  users: User[];\r\n\r\n  constructor(chat: ChatService) {\r\n    chat.getFriends().subscribe(users => {\r\n      this.users = users;\r\n    });\r\n  }\r\n}\r\n","module.exports = \"\"","module.exports = \"<div id=\\\"app-container\\\">Loading...</div>\\r\\n\\r\\n\\r\\n\"","import { Component, OnInit, ElementRef } from '@angular/core';\r\ndeclare let popup: any;\r\n\r\n@Component({\r\n  selector: 'app-login-popup',\r\n  templateUrl: './login-popup.component.html',\r\n  styleUrls: ['./login-popup.component.css']\r\n})\r\nexport class LoginPopupComponent implements OnInit {\r\n\r\n  constructor(private elementRef: ElementRef) {}\r\n\r\n  ngOnInit() {\r\n    this.runScript();\r\n  }\r\n\r\n  runScript () {\r\n    const s = document.createElement('script');\r\n    s.type = 'text/javascript';\r\n    s.src = '/assets/js/libs/popup.js';\r\n    this.elementRef.nativeElement.appendChild(s);\r\n    // s.onload = () => this.triggerDuo();\r\n  }\r\n\r\n}\r\n","module.exports = \"\\r\\n.login-page {\\r\\n  text-align: center;\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n  color: #666;\\r\\n  margin: auto;\\r\\n  margin-top: 4.500em;\\r\\n  right: 0;\\r\\n  bottom: 3.250em;\\r\\n  left: 0;\\r\\n  width: 31.250em;\\r\\n  height: 31.250em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n}\\r\\n\\r\\n.login-page img {\\r\\n  max-width: 100%;\\r\\n  height: auto;\\r\\n}\\r\\n\\r\\n.login-page h1 {\\r\\n  font-family: 'Roboto Slab', serif;\\r\\n  color: rgb(20, 96, 236);\\r\\n  font-size: 4em;\\r\\n  text-transform: uppercase;\\r\\n  font-weight: bold;\\r\\n  line-height: 3.125em;\\r\\n  letter-spacing: 0.119em;\\r\\n  padding-top: 0.0em;\\r\\n  margin-top: 0.000em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n}\\r\\n\\r\\n.login-page h2 {\\r\\n  color: #666;\\r\\n  font-size: 1.000em;\\r\\n  font-weight: 500;\\r\\n  letter-spacing: 0.063em;\\r\\n  line-height: 1.313em;\\r\\n  margin-top: 3.000em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n}\\r\\n\\r\\n.login-page h3 {\\r\\n  color: #666;\\r\\n  font-size: 1.250em;\\r\\n  font-weight: 500;\\r\\n  max-width: 100%;\\r\\n  letter-spacing: 0.063em;\\r\\n  line-height: 1.313em;\\r\\n  margin-top: -3.5em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n}\\r\\n\\r\\n.login-page .small-link {\\r\\n  font-size: 0.750em;\\r\\n  color: #666;\\r\\n  letter-spacing: 0.75px;\\r\\n  line-height: 1.000em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n}\\r\\n\\r\\n.login-page .registration-link {\\r\\n  margin-top: 2em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n}\\r\\n\\r\\n.login-page .registration-link p {\\r\\n  font-size: 1.000em;\\r\\n  color: #666;\\r\\n  letter-spacing: 0.063em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n}\\r\\n\\r\\n.login-page .item-divider {\\r\\n  box-sizing:border-box;\\r\\n  height: 0.063em;\\r\\n  width: 22.125em;\\r\\n  position: -webkit-sticky;\\r\\n  position: sticky;\\r\\n  bottom: -0.500em; left: -0.563em;\\r\\n}\"","module.exports = \"<div class=\\\"login-page\\\">\\r\\n\\r\\n  <!-- APP LOGO -->\\r\\n  <div style=\\\"margin-top:0.000em;\\\">\\r\\n    <img class=\\\"app-logo\\\" src=\\\"assets/images/Dechat.png\\\">\\r\\n  </div>\\r\\n\\r\\n  <!-- APP NAME -->\\r\\n  <h1>\\r\\n    De-Chat\\r\\n  </h1>\\r\\n\\r\\n  <!-- LOGIN DESCRIPTION -->\\r\\n  <h3>\\r\\n    Take complete control of your data with DE-CHAT, the decentralized peer-to-peer data exchange application built on Tim Berners-Lee's Solid data interchange system.\\r\\n  </h3>\\r\\n\\r\\n  <!-- LOGIN TITLE -->\\r\\n  <h2>\\r\\n    Login with Solid Identity\\r\\n  </h2>\\r\\n\\r\\n  <!-- PROVIDER SELECTION -->\\r\\n  <div style=\\\"margin-top: 10px;\\\">\\r\\n    <ng-select class=\\\"login-select\\\"\\r\\n               bindLabel=\\\"name\\\"\\r\\n               bindValue=\\\"loginUrl\\\"\\r\\n               placeholder=\\\"Select ID Provider\\\"\\r\\n               dropdownPosition=\\\"bottom\\\"\\r\\n               [items]=\\\"identityProviders\\\"\\r\\n               [(ngModel)]=\\\"selectedProviderUrl\\\"\\r\\n               style=\\\"width: 360px; height: 48px; margin-left: auto; margin-right: auto;\\\">\\r\\n\\r\\n      <!-- DROPDOWN TEMPLATE -->\\r\\n      <ng-template ng-option-tmp let-item=\\\"item\\\">\\r\\n        <div style=\\\"height:40px; padding-top:10px; position: relative; margin-left: auto; margin-right: auto\\\">\\r\\n          <img [src]=\\\"item.image\\\" style=\\\"float: left; height: 32px; width: 32px; margin-top:-5px;\\\" />\\r\\n          <span style=\\\"float: left; margin-left: 10px;\\\">{{ item.name }}</span>\\r\\n          <div style=\\\"clear: both;\\\"></div>\\r\\n          <div class=\\\"item-divider\\\"></div>\\r\\n        </div>\\r\\n      </ng-template>\\r\\n\\r\\n    </ng-select>\\r\\n    <input type=\\\"text\\\"\\r\\n           class=\\\"wide-text\\\"\\r\\n           *ngIf=\\\"selectedProviderUrl===null\\\"\\r\\n           placeholder=\\\"Enter WebID\\\"\\r\\n           style=\\\"margin-top:10px; padding: 12px 10px; width: 340px; height: 16px; display: block; margin-left: auto; margin-right: auto;\\\"\\r\\n           [(ngModel)]=\\\"customProviderUrl\\\" />\\r\\n    <button id=\\\"btn-go\\\" class=\\\"wide-button\\\" (click)=\\\"onLogin()\\\" *ngIf=\\\"selectedProviderUrl !== undefined || customProviderUrl !== undefined\\\" [disabled]=\\\"selectedProviderUrl===null && !customProviderUrl\\\" style=\\\"margin-top:10px;\\\">Go</button>\\r\\n  </div>\\r\\n\\r\\n  <!-- REGISTRATION -->\\r\\n  <div class=\\\"registration-link\\\">\\r\\n    <p style=\\\"margin: 12px;\\\">Don't have a Solid Identity?</p>\\r\\n    <button id=\\\"btn-register\\\" class=\\\"wide-button\\\" (click)=\\\"goToRegistration()\\\">Register</button>\\r\\n  </div>\\r\\n\\r\\n  <!-- HELP -->\\r\\n  <div style=\\\"margin-top: 48px;\\\">\\r\\n    <a href=\\\"https://solid.mit.edu\\\" target=\\\"_blank\\\" class=\\\"small-link\\\">\\r\\n      <i class=\\\"fas fa-info-circle\\\"></i> What is a Solid Identity?\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n  \\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n// Auth Service\r\nimport { AuthService } from '../../services/solid.auth.service';\r\nimport { SolidProvider } from '../../models/solid-provider.model';\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  constructor(private auth: AuthService, private router: Router) { }\r\n\r\n  /**\r\n   * A list of Solid Identity Providers\r\n   * @type {SolidProvider[]}\r\n   */\r\n  identityProviders: SolidProvider[];\r\n  selectedProviderUrl: string;\r\n  customProviderUrl: string;\r\n\r\n  ngOnInit() {\r\n    // If we're authenticated, go to profile\r\n    if (localStorage.getItem('solid-auth-client')) {\r\n      this.router.navigateByUrl('/chat');\r\n    }\r\n\r\n    this.identityProviders = this.auth.getIdentityProviders();\r\n  }\r\n\r\n  /*\r\n  *  Alternate login-popup function for Solid. See service for more details.\r\n  */\r\n  onLoginPopup = async () => {\r\n    this.auth.solidLoginPopup();\r\n  }\r\n\r\n  onLogin = async () => {\r\n    const idp: string = this.selectedProviderUrl ? this.selectedProviderUrl : this.customProviderUrl;\r\n\r\n    if (idp) {\r\n      try {\r\n        this.auth.solidLogin(idp);\r\n      } catch (err) {\r\n        console.log('An error has occurred logging in: ' + err);\r\n      }\r\n    }\r\n  }\r\n\r\n  goToRegistration() {\r\n    this.router.navigateByUrl('/register');\r\n  }\r\n}\r\n","module.exports = \".messageContainer{\\r\\n    display: flex;\\r\\n    height: auto;\\r\\n    width: 70%;\\r\\n    min-width: 25.000em;\\r\\n    border-radius: 0.313em;\\r\\n    align-items:stretch;\\r\\n    background-color: #eee;\\r\\n    box-shadow: 0 0.188em 0.375em rgba(0,0,0,0.26), 0 0.188em 0.375em rgba(0,0,0,0.23);\\r\\n}\\r\\n\\r\\n.isOwnMessageContainer{\\r\\n    background-color: #01579B;\\r\\n    float: right;\\r\\n    margin-right: 0.625em;\\r\\n}\\r\\n\\r\\n.messageData{\\r\\n    flex: 1;\\r\\n    padding: 0.625em;\\r\\n    font-size: 0.7em;\\r\\n}\\r\\n\\r\\n.sender{\\r\\n    display: block;\\r\\n    color: #222;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.isOwnSender{\\r\\n    color: #E1F5FE;\\r\\n}\\r\\n\\r\\n.timestamp {\\r\\n    color: #555;\\r\\n    font-style: italic;\\r\\n}\\r\\n\\r\\n.isOwnTimestamp{\\r\\n    color: #4FC3F7;\\r\\n}\\r\\n\\r\\n.messageContent{\\r\\n    height: auto;\\r\\n    flex: 9;\\r\\n    background-color: #fff;\\r\\n    padding: 0.625em;\\r\\n}\\r\\n\\r\\n.isOwnMessageContent{\\r\\n    background-color: #E3F2FD;\\r\\n    color: #01579B;\\r\\n}\\r\\n\\r\\n.messageDelete {\\r\\n    background-color: #01579B;\\r\\n    border-top-right-radius: 0.313em;\\r\\n    border-bottom-right-radius: 0.313em;\\r\\n}\\r\\n\\r\\n.deleteButton {\\r\\n    background-color: #01579B;\\r\\n    border: none;\\r\\n    border-top-right-radius: 0.313em;\\r\\n}\\r\\n\\r\\n.imgDelete {\\r\\n    width: 2.000em;\\r\\n    height: 2.000em;\\r\\n    margin-top: 0.500em;\\r\\n}\"","module.exports = \"<div class=\\\"messageContainer\\\"\\r\\n    [ngClass]=\\\"{'isOwnMessageContainer':isOwnMessage}\\\">\\r\\n    <div class=\\\"messageData\\\"\\r\\n        [ngClass]=\\\"{'isOwnMessageData':isOwnMessage}\\\">\\r\\n        <span class=\\\"sender\\\"\\r\\n            [ngClass]=\\\"{'isOwnSender':isOwnMessage}\\\">\\r\\n            {{ userName }}\\r\\n        </span>\\r\\n        <span class=\\\"timestamp\\\" \\r\\n            [ngClass] = \\\"{'isOwnTimestamp':isOwnMessage}\\\">\\r\\n            {{ timeStamp | date:'medium' }}\\r\\n        </span>\\r\\n    </div>\\r\\n    <div class=\\\"messageContent\\\"\\r\\n        [ngClass]=\\\"{'isOwnMessageContent':isOwnMessage}\\\">\\r\\n        {{ messageContent }}\\r\\n    </div>\\r\\n    <div class=\\\"messageDelete\\\">\\r\\n        <button class=\\\"deleteButton\\\" (click)=delete()>\\r\\n            <img class=\\\"imgDelete\\\" src=\\\"assets/images/delete_msg.png\\\" alt=\\\"Delete\\\"/>\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { ChatService } from '../../services/chat.service';\r\nimport { ChatMessage } from '../../models/chat-message.model';\r\n\r\n@Component({\r\n  selector: 'app-message',\r\n  templateUrl: './message.component.html',\r\n  styleUrls: ['./message.component.css']\r\n})\r\nexport class MessageComponent implements OnInit {\r\n\r\n  @Input() chatMessage: ChatMessage;\r\n  userName: string;\r\n  messageContent: string;\r\n  timeStamp: Date = new Date();\r\n  isOwnMessage: boolean;\r\n  ownEmail: string;\r\n\r\n  constructor(private chatService: ChatService) { }\r\n\r\n  delete() {\r\n    this.chatService.deleteMessage(this.chatMessage);\r\n  }\r\n\r\n  ngOnInit(chatMessage = this.chatMessage) {\r\n    if (!chatMessage) {\r\n      chatMessage = new ChatMessage('username', 'Can\\'t load', 'http://webid.com');\r\n    }\r\n    this.chatService.getUser().subscribe(user => {\r\n      if (user !== undefined) { // A better way of solving this\r\n        this.userName = user.username;\r\n      } else {\r\n        this.userName = \"MockName\";\r\n      }\r\n    });\r\n    this.messageContent = chatMessage.message;\r\n    this.timeStamp = chatMessage.timeSent;\r\n    this.isOwnMessage = (this.userName === chatMessage.userName);\r\n    this.userName = chatMessage.userName;\r\n  }\r\n}\r\n","module.exports = \".topnav {\\r\\n    width: 100%;\\r\\n    background-color: rgb(20, 96, 236);\\r\\n    height: 3.125em;\\r\\n    color: #fff;\\r\\n    overflow: hidden;\\r\\n  }\\r\\n\\r\\n  .topnav a {\\r\\n    text-decoration: none;\\r\\n    color: inherit;\\r\\n    height: 100%;\\r\\n  }\\r\\n\\r\\n  .topnav a:hover {\\r\\n    background-color: rgba(0,0,0,0.25);\\r\\n  }\\r\\n\\r\\n  .topnav a:active {\\r\\n    background-color: rgba(0,0,0,0.25);\\r\\n  }\\r\\n\\r\\n  .topnav a:focus {\\r\\n    background-color: rgba(0,0,0,0.25);\\r\\n  }\\r\\n\\r\\n  .topnav .logo {\\r\\n    display: inline-block;\\r\\n    font-family: 'Roboto Slab', serif;\\r\\n    font-size: 1.750em;\\r\\n    font-weight: bold;\\r\\n    text-transform: uppercase;\\r\\n    line-height: 100%;\\r\\n    padding-right: 5.000em;\\r\\n    position: relative;\\r\\n    top: 0.000em;\\r\\n    left: 1.750em;\\r\\n  }\\r\\n\\r\\n  .topnav .menu-item {\\r\\n    display: inline-block;\\r\\n    width: 6.250em;\\r\\n    margin: auto;\\r\\n    text-align: center;\\r\\n\\r\\n  }\\r\\n\\r\\n  .topnav .menu-item i {\\r\\n    font-size: 2em;\\r\\n    margin-top: 0.25em;\\r\\n  }\\r\\n\\r\\n  .topnav .profile-menu {\\r\\n    float: right;\\r\\n  }\"","module.exports = \"<div class=\\\"topnav\\\">\\r\\n  <div class=\\\"topnav\\\">\\r\\n    <div class=\\\"logo\\\">DE-CHAT</div>\\r\\n    <a class=\\\"menu-item\\\" [routerLink]=\\\"['/chat']\\\">\\r\\n        <i class=\\\"far fa-comment\\\"></i>\\r\\n    </a>\\r\\n\\r\\n    <a class=\\\"menu-item\\\" [routerLink]=\\\"['/profile']\\\">\\r\\n      <i class=\\\"fas fa-user\\\"></i>\\r\\n    </a>\\r\\n\\r\\n    <a class=\\\"menu-item profile-menu\\\" (click)=\\\"logout()\\\">\\r\\n      <i class=\\\"fas fa-sign-out-alt\\\"></i>\\r\\n    </a>\\r\\n  </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { AuthService } from '../../services/solid.auth.service';\r\nimport { SolidSession } from '../../models/solid-session.model';\r\n\r\n@Component({\r\n  selector: 'app-navbar',\r\n  templateUrl: './navbar.component.html',\r\n  styleUrls: ['./navbar.component.css']\r\n})\r\nexport class NavbarComponent implements OnInit {\r\n\r\n  user: Observable<SolidSession>;\r\n\r\n  constructor(private authService: AuthService) { }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  logout() {\r\n    this.authService.solidSignOut();\r\n  }\r\n}\r\n","module.exports = \".profile-container {\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n}\\r\\n\\r\\n.profile-container h1 {\\r\\n  font-size: 1.500em;\\r\\n  color: rgb(20, 96, 236);\\r\\n  font-weight: bold;\\r\\n  line-height: 2.000em;\\r\\n  letter-spacing: 0.075em;\\r\\n  text-align: center;\\r\\n  margin-top: 5.125em;\\r\\n  text-transform: uppercase;\\r\\n}\\r\\n\\r\\n.profile-fields-container {\\r\\n  max-width: 46.250em;\\r\\n  min-height: 33.750em;\\r\\n  margin: 0 auto;\\r\\n  border: 0.063em solid #ccc;\\r\\n  box-shadow: #ccc 0.063em 0.063em 0.250em;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.profile-fields-container .profile-image-container {\\r\\n  height: 200px;\\r\\n  width: 100%;\\r\\n  background-size: cover;\\r\\n  background: rgb(20, 96, 236);\\r\\n}\\r\\n\\r\\n.profile-fields-container .profile-image-container img {\\r\\n  height: 8.000em;\\r\\n  border-radius: 50%;\\r\\n  margin-left: auto;\\r\\n  margin-right:auto;\\r\\n  position: relative;\\r\\n  top: 2.500em;\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.profile-fields-container i {\\r\\n  font-size: 0.875em;\\r\\n  color: #89969F;\\r\\n  padding-left: 1.625em;\\r\\n  padding-right: 0.625em;\\r\\n  margin-top: 1.500em;\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text {\\r\\n  height: 0.750em;\\r\\n  width: 17.500em;\\r\\n  border: 0.063em solid #89969F;\\r\\n  border-radius: 0.250em;\\r\\n  padding: 0.625em;\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text::-webkit-input-placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text:-ms-input-placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text::-ms-input-placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text::placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-save-button-container {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-bottom: auto;\\r\\n  height: 6.250em;\\r\\n  flex-direction: column;\\r\\n  justify-content: flex-end;\\r\\n}\\r\\n\\r\\n.profile-save-button {\\r\\n  background-color: rgb(20, 96, 236);\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n  width: 17.500em;\\r\\n}\\r\\n\\r\\n.profile-save-button:disabled {\\r\\n  background-color: #F0EEEB;\\r\\n  border-color: #F0EEEB;\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.loading-image {\\r\\n  text-align: center;\\r\\n  margin-top: 3.125em;\\r\\n}\\r\\n\\r\\n.addfriends {\\r\\n  margin: 1.250em;\\r\\n}\\r\\n\\r\\n.addfriends h2 {\\r\\n  color: rgb(20, 96, 236);\\r\\n}\\r\\n\\r\\n.addfriends input {\\r\\n  margin-right: 0.625em;\\r\\n}\"","module.exports = \"<div class=\\\"profile-container\\\">\\r\\n  <h1>Profile</h1>\\r\\n\\r\\n  <!-- LOADING IMAGE -->\\r\\n  <div class=\\\"loading-image\\\" *ngIf=\\\"loadingProfile\\\">\\r\\n    <i class=\\\"fas fa-circle-notch fa-4x fa-spin\\\"></i>\\r\\n  </div>\\r\\n\\r\\n  <!-- MAIN PROFILE -->\\r\\n  <div class=\\\"profile-fields-container\\\" *ngIf=\\\"!loadingProfile\\\">\\r\\n    <div class=\\\"profile-image-container\\\">\\r\\n      <img [src]=\\\"profileImage\\\" />\\r\\n    </div>\\r\\n      <div class=\\\"fields pure-g\\\">\\r\\n        <!-- NAME -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-user\\\"></i> <input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"fn\\\" placeholder=\\\"NAME\\\" [(ngModel)]=\\\"profile.fn\\\" readonly/>\\r\\n        </div>\\r\\n\\r\\n        <!-- PHONE -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-phone\\\"></i><input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"phone\\\" placeholder=\\\"PHONE\\\" [(ngModel)]=\\\"profile.phone\\\" readonly/>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"fields pure-g\\\">\\r\\n        <!-- ROLE -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-user-astronaut\\\"></i> <input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"role\\\" placeholder=\\\"ROLE\\\" [(ngModel)]=\\\"profile.role\\\" readonly/>\\r\\n        </div>\\r\\n\\r\\n        <!-- EMAIL -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-envelope\\\"></i><input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"email\\\" placeholder=\\\"EMAIL\\\" [(ngModel)]=\\\"profile.email\\\" readonly/>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"fields pure-g\\\">\\r\\n        <!-- ORGANIZATION -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-building\\\"></i> <input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"company\\\" placeholder=\\\"ORGANIZATION\\\" [(ngModel)]=\\\"profile.company\\\" readonly/>\\r\\n        </div>\\r\\n\\r\\n        <!-- ADDRESS -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-map-marker-alt\\\" style=\\\"width: 12px; margin-left: 2px;\\\"></i><input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"address\\\" placeholder=\\\"ADDRESS\\\" [(ngModel)]=\\\"profile.address.street\\\" readonly/>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"addfriends\\\">\\r\\n        <h2>Add Friends</h2>\\r\\n        <i class=\\\"fas fa-user\\\"></i><input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"webIdAdd\\\" placeholder=\\\"WebId\\\" [(ngModel)]=\\\"addWebId\\\" />\\r\\n        <button type=\\\"submit\\\" class=\\\"wide-button profile-save-button\\\" (click)=\\\"addFriend()\\\">Add Friend</button>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { NgForm } from '@angular/forms';\r\nimport { SolidProfile } from '../../models/solid-profile.model';\r\nimport { RdfService } from '../../services/rdf.service';\r\nimport { AuthService } from '../../services/solid.auth.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.css'],\r\n})\r\nexport class ProfileComponent implements OnInit  {\r\n\r\n  profile: SolidProfile;\r\n  profileImage: string;\r\n  loadingProfile: Boolean;\r\n  addWebId: string;\r\n\r\n  @ViewChild('f') cardForm: NgForm;\r\n\r\n  constructor(private rdf: RdfService,\r\n    private route: ActivatedRoute, private auth: AuthService) {}\r\n\r\n  ngOnInit() {\r\n    this.loadingProfile = true;\r\n    this.loadProfile();\r\n\r\n    // Clear cached profile data\r\n    // TODO: Remove this code and find a better way to get the old data\r\n    localStorage.removeItem('oldProfileData');\r\n  }\r\n\r\n  // Loads the profile from the rdf service and handles the response\r\n  async loadProfile() {\r\n    try {\r\n      this.loadingProfile = true;\r\n      const profile = await this.rdf.getProfile();\r\n      if (profile) {\r\n        this.profile = profile;\r\n        this.auth.saveOldUserData(profile);\r\n      }\r\n\r\n      this.loadingProfile = false;\r\n      this.setupProfileData();\r\n    } catch (error) {\r\n      console.log(`Error: ${error}`);\r\n    }\r\n  }\r\n\r\n  // Submits the form, and saves the profile data using the auth/rdf service\r\n  async onSubmit () {\r\n    if (!this.cardForm.invalid) {\r\n      try {\r\n        await this.rdf.updateProfile(this.cardForm);\r\n        localStorage.setItem('oldProfileData', JSON.stringify(this.profile));\r\n      } catch (err) {\r\n        console.log(`Error: ${err}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Format data coming back from server. Intended purpose is to replace profile image with default if it's missing\r\n  // and potentially format the address if we need to reformat it for this UI\r\n  private setupProfileData() {\r\n    if (this.profile) {\r\n      this.profileImage = this.profile.image ? this.profile.image : '/assets/images/profile.png';\r\n    } else {\r\n      this.profileImage = '/assets/images/profile.png';\r\n    }\r\n  }\r\n\r\n  // Example of logout functionality. Normally wouldn't be triggered by clicking the profile picture.\r\n  logout() {\r\n    this.auth.solidSignOut();\r\n  }\r\n\r\n  async addFriend() {\r\n    try{\r\n      this.rdf.addFriend(this.addWebId);\r\n    }catch {\r\n      console.log(\"The URI provided is not well-formed or does not point to a profile\")\r\n    }\r\n  }\r\n}\r\n","module.exports = \".registration {\\r\\n  text-align: center;\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n}\\r\\n\\r\\n.registration .header-bar {\\r\\n  margin: 0.000em;\\r\\n  height: 2.750em;\\r\\n  width: calc(100% + 1.000em);\\r\\n  background-color: #3D6DEB;\\r\\n  color: #fff;\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n}\\r\\n\\r\\n.registration .header-bar p {\\r\\n  text-align: center;\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n  font-weight: bold;\\r\\n  font-size: 0.875em;\\r\\n  letter-spacing: 0.063em;\\r\\n  line-height: 0.938em;\\r\\n}\\r\\n\\r\\n.registration .header-text {\\r\\n  margin-top: 5.750em;\\r\\n  width: 22.500em;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n  font-size: 0.875em;\\r\\n  color: #666;\\r\\n}\\r\\n\\r\\n.registration .header-text a {\\r\\n  color: #666;\\r\\n  font-size: 0.750em;\\r\\n}\\r\\n\\r\\n.registration .provider-card-container {\\r\\n  margin-top: 1.750em;\\r\\n}\\r\\n\\r\\n.registration .provider-card {\\r\\n  height: 8.750em;\\r\\n  width: 21.875em;\\r\\n  border: 0.063em solid #DAE0E6;\\r\\n  border-radius: 0.125em;\\r\\n  background-color: #fff;\\r\\n  margin: 0.625em;\\r\\n  display: inline-block;\\r\\n  box-shadow: #DAE0E6 0.063em 0.063em 0.375em;\\r\\n}\\r\\n\\r\\n.registration .provider-card a {\\r\\n  text-decoration: none;\\r\\n}\\r\\n\\r\\n.registration .provider-card .provider-logo {\\r\\n  height: 2.750em;\\r\\n  width: 2.750em;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n  margin-top: 1.000em;\\r\\n}\\r\\n\\r\\n.registration .provider-card h2 {\\r\\n  color: #656E75;\\r\\n  font-size: 1.125em;\\r\\n  margin-top: -0.125em;\\r\\n  letter-spacing: 0.056em;\\r\\n  line-height: 1.500em;\\r\\n}\\r\\n\\r\\n.registration .provider-card p {\\r\\n  color: #656E75;\\r\\n  font-size: 0.750em;\\r\\n  line-height: 1.000em;\\r\\n}\\r\\n\"","module.exports = \"<div class=\\\"registration\\\">\\r\\n  <!-- Header Bar -->\\r\\n  <div class=\\\"header-bar\\\">\\r\\n    <p>Select Solid Identity Provider</p>\\r\\n  </div>\\r\\n\\r\\n  <!-- Header Text -->\\r\\n  <div class=\\\"header-text\\\">\\r\\n    <p>\\r\\n      With a Solid Identity your personal data is stored securely in a POD. You control who has access to it.\\r\\n    </p>\\r\\n    <a href=\\\"https://solid.mit.edu\\\" target=\\\"_blank\\\">\\r\\n      Learn more about Solid IDs and PODs\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n  <!-- Provider cards -->\\r\\n  <div class=\\\"provider-card-container\\\">\\r\\n    <div class=\\\"provider-card\\\" *ngFor=\\\"let provider of availableProviders\\\">\\r\\n      <a href=\\\"{{ provider.loginUrl }}\\\">\\r\\n      <img [src]=\\\"provider.image\\\" class=\\\"provider-logo\\\">\\r\\n      <h2>{{ provider.name }}</h2>\\r\\n      <p>{{ provider.desc }}</p>\\r\\n      </a>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from '../../services/solid.auth.service';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.component.html',\r\n  styleUrls: ['./register.component.css']\r\n})\r\nexport class RegisterComponent implements OnInit {\r\n  availableProviders: any[];\r\n\r\n  constructor(private auth: AuthService) { }\r\n\r\n  ngOnInit() {\r\n    this.availableProviders = this.auth.getIdentityProviders();\r\n    this.availableProviders = this.availableProviders.filter(idp => idp.providerLoginUrl !== null);\r\n  }\r\n\r\n}\r\n","export class ChatMessage {\r\n\r\n    constructor(userName: string, message: string, webId: string, other: string = 'none') {\r\n        this.userName = userName;\r\n        this.message = message;\r\n        this.webId = webId;\r\n        this.other = other;\r\n    }\r\n\r\n    uri?: string;\r\n    userName?: string;\r\n    webId?: string;\r\n    message?: string;\r\n    timeSent?: Date = new Date();\r\n    other?: string;\r\n}\r\n","export class Notification {\r\n\r\n    constructor(resourceUri: string, type: string, fromWebId: string) {\r\n        this.resourceUri = resourceUri;\r\n        this.type = type;\r\n        this.fromWebId = fromWebId;\r\n    }\r\n\r\n    resourceUri?: string;\r\n    type?: string;\r\n    fromWebId?: string;\r\n}\r\n","export class User {\r\n\r\n    constructor(username, fullName, webId) {\r\n        this.username = username;\r\n        this.fullName = fullName;\r\n        this.webId = webId;\r\n    }\r\n\r\n    username?: string;\r\n    fullName?: string;\r\n    webId?: string;\r\n    isCurrent?: boolean;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  CanActivate,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  Router\r\n} from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { map, take, tap } from 'rxjs/operators';\r\n\r\nimport { AuthService } from './solid.auth.service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private auth: AuthService, private router: Router) {}\r\n\r\n  canActivate(\r\n    next: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean> | Promise<boolean> | boolean {\r\n    const isLoggedIn = localStorage.getItem('solid-auth-client') ? true : false;\r\n\r\n    if (!isLoggedIn) {\r\n      this.router.navigateByUrl('/login');\r\n    }\r\n\r\n    return isLoggedIn; /* this.auth.session.pipe(\r\n      take(1),\r\n      map(session => !!session),\r\n      tap(loggedIn => {\r\n        if (!loggedIn) {\r\n          return this.router.navigate(['/']);\r\n        }\r\n      })\r\n    );*/\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\n\r\nimport { ChatMessage } from '../models/chat-message.model';\r\nimport { RdfService } from './rdf.service';\r\nimport { User } from '../models/user.model';\r\nimport { Notification } from '../models/notification.model';\r\n\r\n@Injectable()\r\nexport class ChatService {\r\n\r\n  friends: User[] = new Array<User>();\r\n  messages: ChatMessage[] = new Array<ChatMessage>();\r\n\r\n  currentChannelUri: string;\r\n  currentChatFileUri: string;\r\n  interval: any;\r\n  inboxDaemonTimer = 3000;\r\n\r\n  me: User;\r\n  other: User;\r\n\r\n  constructor(private rdf: RdfService) {\r\n    this.loadUserData().then(() => {\r\n      this.loadFriends();\r\n      this.checkInbox().then(() => {\r\n        this.setOther(new User('yerayv3', 'Yeray', 'https://yerayv3.inrupt.net/profile/card#me'));\r\n      });\r\n      this.startNotificationsDaemon();\r\n    });\r\n    // Temporary\r\n    // this.setOther(new User('migarve55', 'Miguel Garnacho Velez', 'https://migarve55.solid.community/profile/card#me'));\r\n\r\n  }\r\n\r\n  private async loadUserData() {\r\n    await this.rdf.getSession();\r\n    if (!this.rdf.session) {\r\n      return;\r\n    }\r\n    this.me = new User(this.getUsernameFromWebID(this.rdf.session.webId), this.rdf.getName(this.rdf.session.webId), this.rdf.session.webId);\r\n  }\r\n\r\n  /* DEPRECATED\r\n  setupListener() {\r\n    this.rdf.addListener(this.getCurrentDateChatUri(this.currentChannelUri), this.loadMessages);\r\n  }\r\n  */\r\n\r\n\r\n  getUser() {\r\n    return of(this.me);\r\n  }\r\n\r\n  getFriends(): Observable<User[]> {\r\n    return of(this.friends);\r\n  }\r\n\r\n  setOther(other: User) {\r\n    if (!this.rdf.session) {\r\n      return;\r\n    }\r\n    if (this.other != null) {\r\n      this.other.isCurrent = false;\r\n    }\r\n    other.isCurrent = true;\r\n    console.log('Other is ' + other.username);\r\n    if (this.other == null || this.other.username !== other.username) {\r\n      this.other = other;\r\n      this.reloadMessages();\r\n    }\r\n  }\r\n\r\n  async sendMessage(msg: string) {\r\n    const m = new ChatMessage(this.me.username, msg, this.me.webId, this.other.webId);\r\n    m.uri = await this.rdf.appendMessage(await this.getCurrentChatUri(this.currentChannelUri), m);\r\n    this.addMessage(m);\r\n  }\r\n\r\n  async deleteMessage(message: ChatMessage) {\r\n    this.rdf.deleteMessage(await this.getCurrentChatUri(this.currentChannelUri), message);\r\n    this.messages.splice(this.messages.indexOf(message), 1);\r\n  }\r\n\r\n  getMessages(): Observable<ChatMessage[]> {\r\n    return of(this.messages);\r\n  }\r\n\r\n  private async loadFriends() {\r\n    await this.rdf.getSession();\r\n    if (!this.rdf.session) {\r\n      return;\r\n    }\r\n    this.rdf.getFriends().then(res => res.map(e => e.value).forEach(async webId => {\r\n      this.friends.push(new User(this.getUsernameFromWebID(webId), (await this.rdf.getName(webId)).value, webId));\r\n      this.setOther(this.friends[0]);\r\n    }));\r\n  }\r\n\r\n  private async reloadMessages() {\r\n    this.messages.length = 0;\r\n    this.checkInbox().then(() => this.reloadChatData().then(() => this.loadMessages()));\r\n  }\r\n\r\n  private async reloadChatData() {\r\n    console.log('Chat session data reloading...');\r\n    await this.rdf.getSession();\r\n    try {\r\n      this.currentChannelUri = await this.rdf.getChannelUri(this.me.webId, this.other.webId);\r\n      this.currentChatFileUri = this.getCurrentChatUri(this.currentChannelUri);\r\n      await this.rdf.createStructure(this.currentChatFileUri);\r\n    } catch (error) {\r\n      console.log('Chat not initialised, initializing...');\r\n\r\n      this.currentChannelUri = this.getChannelUri();\r\n      this.currentChatFileUri = this.getCurrentChatUri(this.currentChannelUri);\r\n      await this.rdf.createStructure(this.currentChatFileUri);\r\n      await this.rdf.createNewChat(this.me.webId, this.other.webId, this.currentChannelUri);\r\n\r\n    }\r\n\r\n\r\n    console.log(`Channel URI [${this.urlLogFilter(this.currentChannelUri)}] FOUND`);\r\n    console.log(`Chat file URI [${this.urlLogFilter(this.currentChatFileUri)}] FOUND`);\r\n\r\n  }\r\n\r\n  private async loadMessages() {\r\n    console.log(`Getting messages from file [${this.urlLogFilter(this.currentChatFileUri)}]` +\r\n                ` in channel [${this.urlLogFilter(this.currentChannelUri)}]`);\r\n    this.rdf.getMessageUrisForFile(this.currentChatFileUri, this.currentChannelUri).then(res => {\r\n      res.forEach(async el => {\r\n        const maker = await this.rdf.getMessageMaker(el.value, this.currentChatFileUri);\r\n        const m = new ChatMessage(this.getUsernameFromWebID(maker),\r\n                                  await this.rdf.getMessageContent(el.value, this.currentChatFileUri),\r\n                                  maker);\r\n        m.uri = el.value;\r\n        m.timeSent = await this.rdf.getMessageDate(el.value, this.currentChatFileUri);\r\n        this.addMessage(m);\r\n      });\r\n    });\r\n    // this.setupListener();  Not supported by server\r\n  }\r\n\r\n  private addMessage(msg: ChatMessage) {\r\n    this.messages.push(msg);\r\n  }\r\n\r\n  /* UNUSED\r\n  getTimeStamp(now: Date) {\r\n    const date = now.getUTCFullYear() + '/' +\r\n      (now.getUTCMonth() + 1) + '/' +\r\n      now.getUTCDate();\r\n    const time = now.getUTCHours() + ':' +\r\n      now.getUTCMinutes() + ':' +\r\n      now.getUTCSeconds();\r\n\r\n    return (date + ' ' + time);\r\n  }\r\n  */\r\n\r\n  private getCurrentChatUri(channelUri: string) {\r\n    const now = new Date();\r\n    return channelUri + '/' +\r\n      now.getUTCFullYear() + '/' +\r\n      ('0' + (now.getUTCMonth() + 1)).slice(-2) + '/' +\r\n      ('0' + now.getUTCDate()).slice(-2) + '/' + 'chat.ttl';\r\n  }\r\n\r\n  private getUsernameFromWebID(webId: string): string {\r\n    let username = '';\r\n    if (webId.includes('https://')) {\r\n      username = webId.replace('https://', '');\r\n    } else {\r\n      username = webId.replace('http://', '');\r\n    }\r\n    return username.split('.')[0];\r\n  }\r\n\r\n  private getChannelUri() {\r\n    return this.me.webId.replace('profile/card#me', 'public/' + this.getChannelCode(this.me, this.other));\r\n  }\r\n\r\n  private getChannelCode(me: User, other: User) {\r\n    return me.username + '_' + other.username;\r\n  }\r\n\r\n  private urlLogFilter(url: string) {\r\n    return url.replace('https://josecuriosoalternativo.inrupt.net', '').replace('https://josecurioso.solid.community', '');\r\n  }\r\n\r\n  async checkInbox() {\r\n    if (!this.rdf.session) {\r\n      return;\r\n    }\r\n    await this.rdf.checkInbox(this.me.webId, this);\r\n  }\r\n\r\n  async startNotificationsDaemon() {\r\n    if (!this.rdf.session) {\r\n      return;\r\n    }\r\n    this.interval = setInterval(() => {\r\n      this.checkInbox();\r\n    }, this.inboxDaemonTimer); // Executes checkInbox every 5 seconds\r\n  }\r\n\r\n  stopNotificationsDaemon() {\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  async callbackForNotificationProcessing(notification: Notification) {\r\n    console.log('Notification callback executed:');\r\n    console.log(notification);\r\n    if (notification.type === 'NewMessage') {\r\n      const maker = await this.rdf.getMessageMaker(notification.fromWebId, this.currentChatFileUri);\r\n        const m = new ChatMessage(this.getUsernameFromWebID(maker),\r\n                                  await this.rdf.getMessageContent(notification.fromWebId, this.currentChatFileUri),\r\n                                  maker);\r\n        m.uri = notification.fromWebId;\r\n        m.timeSent = await this.rdf.getMessageDate(notification.fromWebId, this.currentChatFileUri);\r\n        this.addMessage(m);\r\n    }\r\n    if (notification.type === 'LongChat') {\r\n      await this.rdf.addChatToCard(this.me.webId, notification.resourceUri, notification.fromWebId);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { SolidSession } from '../models/solid-session.model';\r\nimport { ChatMessage } from '../models/chat-message.model';\r\nimport { Notification } from '../models/notification.model';\r\nimport { ChatService } from '../services/chat.service';\r\nimport * as fileClient from 'solid-file-client';\r\n\r\n// TODO: Remove any UI interaction from this service\r\nimport { NgForm } from '@angular/forms';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { NamedNode } from 'src/assets/types/rdflib';\r\nimport { stringify } from '@angular/core/src/util';\r\n\r\ndeclare let solid: any;\r\ndeclare let $rdf: any;\r\n\r\nconst VCARD = $rdf.Namespace('http://www.w3.org/2006/vcard/ns#');\r\nconst FOAF = $rdf.Namespace('http://xmlns.com/foaf/0.1/');\r\nconst LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\r\nconst FLOW = $rdf.Namespace('http://www.w3.org/2005/01/wf/flow#');\r\nconst SIOC = $rdf.Namespace('http://rdfs.org/sioc/ns#');\r\nconst MEE = $rdf.Namespace('http://www.w3.org/ns/pim/meeting#');\r\nconst TERMS = $rdf.Namespace('http://purl.org/dc/terms/');\r\nconst RDFSYN = $rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\r\nconst ICAL = $rdf.Namespace('http://www.w3.org/2002/12/cal/ical#');\r\nconst UI = $rdf.Namespace('http://www.w3.org/ns/ui#');\r\nconst DCEL = $rdf.Namespace('http://purl.org/dc/elements/1.1/');\r\nconst NONE = $rdf.Namespace('http://example.org/ns/none#');\r\nconst ACL = $rdf.Namespace('http://www.w3.org/ns/auth/acl#');\r\nconst PL = $rdf.Namespace('http://www.w3.org/ns/iana/media-types/text/plain#');\r\n\r\n// Maintain log of checked notification\r\nconst alreadychecked = [];\r\n/**\r\n * A service layer for RDF data manipulation using rdflib.js\r\n * @see https://solid.inrupt.com/docs/manipulating-ld-with-rdflib\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class RdfService {\r\n\r\n  session: SolidSession;\r\n  store = $rdf.graph();\r\n\r\n  /**\r\n   * A helper object that connects to the web, loads data, and saves it back. More powerful than using a simple\r\n   * store object.\r\n   * When you have a fetcher, then you also can ask the query engine to go fetch new linked data automatically\r\n   * as your query makes its way across the web.\r\n   * @see http://linkeddata.github.io/rdflib.js/doc/Fetcher.html\r\n   */\r\n  fetcher = $rdf.Fetcher;\r\n\r\n  /**\r\n   * The UpdateManager allows you to send small changes to the server to patch the data as your user changes data in\r\n   * real time. It also allows you to subscribe to changes other people make to the same file, keeping track of\r\n   * upstream and downstream changes, and signaling any conflict between them.\r\n   * @see http://linkeddata.github.io/rdflib.js/doc/UpdateManager.html\r\n   */\r\n  updateManager = $rdf.UpdateManager;\r\n\r\n  constructor(private toastr: ToastrService) {\r\n    const fetcherOptions = {};\r\n    this.fetcher = new $rdf.Fetcher(this.store, fetcherOptions);\r\n    this.updateManager = new $rdf.UpdateManager(this.store);\r\n    this.getSession();\r\n  }\r\n\r\n  /**\r\n   * Fetches the session from Solid, and store results in localStorage\r\n   */\r\n  getSession = async () => {\r\n    this.session = await solid.auth.currentSession(localStorage);\r\n  }\r\n\r\n  /**\r\n   * Gets a node that matches the specified pattern using the VCARD onthology\r\n   *\r\n   * any() can take a subject and a predicate to find Any one person identified by the webId\r\n   * that matches against the node/predicated\r\n   *\r\n   * @param {string} node VCARD predicate to apply to the $rdf.any()\r\n   * @param {string?} webId The webId URL (e.g. https://yourpod.solid.community/profile/card#me)\r\n   * @return {string} The value of the fetched node or an emtpty string\r\n   * @see https://github.com/solid/solid-tutorial-rdflib.js\r\n   */\r\n  getValueFromVcard = (node: string, webId?: string): string | any => {\r\n    return this.getValueFromNamespace(node, VCARD, webId);\r\n  }\r\n\r\n  /**\r\n   * Gets a node that matches the specified pattern using the FOAF onthology\r\n   * @param {string} node FOAF predicate to apply to the $rdf.any()\r\n   * @param {string?} webId The webId URL (e.g. https://yourpod.solid.community/profile/card#me)\r\n   * @return {string} The value of the fetched node or an emtpty string\r\n   */\r\n  getValueFromFoaf = (node: string, webId?: string) => {\r\n    return this.getValueFromNamespace(node, FOAF, webId);\r\n  }\r\n\r\n  /**\r\n   * Gets a node that matches the specified pattern using the LDP onthology\r\n   * @param {string} node LDP predicate to apply to the $rdf.any()\r\n   * @param {string?} webId The webId URL (e.g. https://yourpod.solid.community/profile/card#me)\r\n   * @return {string} The value of the fetched node or an emtpty string\r\n   */\r\n  getValueFromLdp = (node: string, webId?: string) => {\r\n    return this.getValueFromNamespace(node, LDP, webId);\r\n  }\r\n\r\n  transformDataForm = (form: NgForm, me: any, doc: any) => {\r\n    const insertions = [];\r\n    const deletions = [];\r\n    const fields = Object.keys(form.value);\r\n    const oldProfileData = JSON.parse(localStorage.getItem('oldProfileData')) || {};\r\n\r\n    // We need to split out into three code paths here:\r\n    // 1. There is an old value and a new value. This is the update path\r\n    // 2. There is no old value and a new value. This is the insert path\r\n    // 3. There is an old value and no new value. Ths is the delete path\r\n    // These are separate codepaths because the system needs to know what to do in each case\r\n    fields.map(field => {\r\n\r\n      const predicate = VCARD(this.getFieldName(field));\r\n      const subject = this.getUriForField(field, me);\r\n      const why = doc;\r\n\r\n      const fieldValue = this.getFieldValue(form, field);\r\n      const oldFieldValue = this.getOldFieldValue(field, oldProfileData);\r\n\r\n      // if there's no existing home phone number or email address, we need to add one, then add the link for hasTelephone or hasEmail\r\n      if (!oldFieldValue && fieldValue && (field === 'phone' || field === 'email')) {\r\n        this.addNewLinkedField(field, insertions, predicate, fieldValue, why, me);\r\n      } else {\r\n\r\n        // Add a value to be updated\r\n        if (oldProfileData[field] && form.value[field] && !form.controls[field].pristine) {\r\n          deletions.push($rdf.st(subject, predicate, oldFieldValue, why));\r\n          insertions.push($rdf.st(subject, predicate, fieldValue, why));\r\n\r\n          // Add a value to be deleted\r\n        } else if (oldProfileData[field] && !form.value[field] && !form.controls[field].pristine) {\r\n          deletions.push($rdf.st(subject, predicate, oldFieldValue, why));\r\n\r\n          // Add a value to be inserted\r\n        } else if (!oldProfileData[field] && form.value[field] && !form.controls[field].pristine) {\r\n          insertions.push($rdf.st(subject, predicate, fieldValue, why));\r\n        }\r\n      }\r\n    });\r\n\r\n    return {\r\n      insertions: insertions,\r\n      deletions: deletions\r\n    };\r\n  }\r\n\r\n  private addNewLinkedField(field, insertions, predicate, fieldValue, why, me: any) {\r\n    // Generate a new ID. This id can be anything but needs to be unique.\r\n    const newId = field + ':' + Date.now();\r\n\r\n    // Get a new subject, using the new ID\r\n    const newSubject = $rdf.sym(this.session.webId.split('#')[0] + '#' + newId);\r\n\r\n    // Set new predicate, based on email or phone fields\r\n    const newPredicate = field === 'phone' ? $rdf.sym(VCARD('hasTelephone')) : $rdf.sym(VCARD('hasEmail'));\r\n\r\n    // Add new phone or email to the pod\r\n    insertions.push($rdf.st(newSubject, predicate, fieldValue, why));\r\n\r\n    // Set the type (defaults to Home/Personal for now) and insert it into the pod as well\r\n    // Todo: Make this dynamic\r\n    const type = field === 'phone' ? $rdf.literal('Home') : $rdf.literal('Personal');\r\n    insertions.push($rdf.st(newSubject, VCARD('type'), type, why));\r\n\r\n    // Add a link in #me to the email/phone number (by id)\r\n    insertions.push($rdf.st(me, newPredicate, newSubject, why));\r\n  }\r\n\r\n  private getUriForField(field, me): string {\r\n    let uriString: string;\r\n    let uri: any;\r\n\r\n    switch (field) {\r\n      case 'phone':\r\n        uriString = this.getValueFromVcard('hasTelephone');\r\n        if (uriString) {\r\n          uri = $rdf.sym(uriString);\r\n        }\r\n        break;\r\n      case 'email':\r\n        uriString = this.getValueFromVcard('hasEmail');\r\n        if (uriString) {\r\n          uri = $rdf.sym(uriString);\r\n        }\r\n        break;\r\n      default:\r\n        uri = me;\r\n        break;\r\n    }\r\n\r\n    return uri;\r\n  }\r\n\r\n  /**\r\n   * Extracts the value of a field of a NgForm and converts it to a $rdf.NamedNode\r\n   * @param {NgForm} form\r\n   * @param {string} field The name of the field that is going to be extracted from the form\r\n   * @return {RdfNamedNode}\r\n   */\r\n  private getFieldValue(form: NgForm, field: string): any {\r\n    let fieldValue: any;\r\n\r\n    if (!form.value[field]) {\r\n      return;\r\n    }\r\n\r\n    switch (field) {\r\n      case 'phone':\r\n        fieldValue = $rdf.sym('tel:+' + form.value[field]);\r\n        break;\r\n      case 'email':\r\n        fieldValue = $rdf.sym('mailto:' + form.value[field]);\r\n        break;\r\n      default:\r\n        fieldValue = form.value[field];\r\n        break;\r\n    }\r\n\r\n    return fieldValue;\r\n  }\r\n\r\n  private getOldFieldValue(field, oldProfile): any {\r\n    let oldValue: any;\r\n\r\n    if (!oldProfile || !oldProfile[field]) {\r\n      return;\r\n    }\r\n\r\n    switch (field) {\r\n      case 'phone':\r\n        oldValue = $rdf.sym('tel:+' + oldProfile[field]);\r\n        break;\r\n      case 'email':\r\n        oldValue = $rdf.sym('mailto:' + oldProfile[field]);\r\n        break;\r\n      default:\r\n        oldValue = oldProfile[field];\r\n        break;\r\n    }\r\n\r\n    return oldValue;\r\n  }\r\n\r\n  private getFieldName(field): string {\r\n    switch (field) {\r\n      case 'company':\r\n        return 'organization-name';\r\n      case 'phone':\r\n      case 'email':\r\n        return 'value';\r\n      default:\r\n        return field;\r\n    }\r\n  }\r\n\r\n  updateProfile = async (form: NgForm) => {\r\n    const me = $rdf.sym(this.session.webId);\r\n    const doc = $rdf.NamedNode.fromValue(this.session.webId.split('#')[0]);\r\n    const data = this.transformDataForm(form, me, doc);\r\n\r\n    // Update existing values\r\n    if (data.insertions.length > 0 || data.deletions.length > 0) {\r\n      this.updateManager.update(data.deletions, data.insertions, (response, success, message) => {\r\n        if (success) {\r\n          this.toastr.success('Your Solid profile has been successfully updated', 'Success!');\r\n          form.form.markAsPristine();\r\n          form.form.markAsTouched();\r\n        } else {\r\n          this.toastr.error('Message: ' + message, 'An error has occurred');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getAddress = () => {\r\n    const linkedUri = this.getValueFromVcard('hasAddress');\r\n\r\n    if (linkedUri) {\r\n      return {\r\n        locality: this.getValueFromVcard('locality', linkedUri),\r\n        country_name: this.getValueFromVcard('country-name', linkedUri),\r\n        region: this.getValueFromVcard('region', linkedUri),\r\n        street: this.getValueFromVcard('street-address', linkedUri),\r\n      };\r\n    }\r\n\r\n    return {};\r\n  }\r\n\r\n  // Function to get email. This returns only the first email, which is temporary\r\n  getEmail = () => {\r\n    const linkedUri = this.getValueFromVcard('hasEmail');\r\n\r\n    if (linkedUri) {\r\n      return this.getValueFromVcard('value', linkedUri).split('mailto:')[1];\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  // Function to get phone number. This returns only the first phone number, which is temporary. It also ignores the type.\r\n  getPhone = () => {\r\n    const linkedUri = this.getValueFromVcard('hasTelephone');\r\n\r\n    if (linkedUri) {\r\n      return this.getValueFromVcard('value', linkedUri).split('tel:+')[1];\r\n    }\r\n  }\r\n\r\n  getProfile = async () => {\r\n\r\n    if (!this.session) {\r\n      await this.getSession();\r\n    }\r\n\r\n    try {\r\n      await this.fetcher.load(this.session.webId);\r\n\r\n      return {\r\n        fn: this.getValueFromVcard('fn'),\r\n        company: this.getValueFromVcard('organization-name'),\r\n        phone: this.getPhone(),\r\n        role: this.getValueFromVcard('role'),\r\n        image: this.getValueFromVcard('hasPhoto'),\r\n        address: this.getAddress(),\r\n        email: this.getEmail(),\r\n      };\r\n    } catch (error) {\r\n      console.log(`Error fetching data: ${error}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets any resource that matches the node, using the provided Namespace\r\n   * @param {string} node The name of the predicate to be applied using the provided Namespace\r\n   * @param {$rdf.namespace} namespace The RDF Namespace\r\n   * @param {string?} webId The webId URL (e.g. https://yourpod.solid.community/profile/card#me)\r\n   */\r\n  private getValueFromNamespace(node: string, namespace: any, webId?: string): string | any {\r\n    const store = this.store.any($rdf.sym(webId || this.session.webId), namespace(node));\r\n    if (store) {\r\n      return store.value;\r\n    }\r\n    return '';\r\n  }\r\n\r\n\r\n  //  //  //  //  //  //  //   //   //  //\r\n  //  //  //  //  //  //  //   //   //  //\r\n  // NEW METHODS ADDED BELOW THIS POINT //\r\n  //  //  //  //  //  //  //   //   //  //\r\n  //  //  //  //  //  //  //   //   //  //\r\n\r\n  /**\r\n  * Returns an array of NamedNode objects matching the term in a uri\r\n  * @param {any} term term to look for in the document\r\n  * @param {string} uri uri where you want to look (defaults to your webId)\r\n  * @return {Promise<Array<NamedNode>>} A promise cntaining the array of NamedNode objects\r\n  */\r\n  async getArray(term: any, uri: string = this.session.webId): Promise<Array<NamedNode>> {\r\n    try {\r\n      const d = this.store.sym(uri);\r\n      await this.fetcher.load(d.doc());\r\n      return this.store.each(d, term);\r\n\r\n    } catch (error) {\r\n      console.log(`Error fetching data: ${error}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Returns a NamedNode object matching the term in a uri\r\n  * @param {any} term term to look for in the document\r\n  * @param {string} uri uri where you want to look (defaults to your webId)\r\n  * @return {Promise<NamedNode>} A promise cntaining the NamedNode object\r\n  */\r\n  async getSingle(term: any, uri: string = this.session.webId): Promise<NamedNode> {\r\n    const d = this.store.sym(uri);\r\n    await this.fetcher.load(d.doc());\r\n    return this.store.any(d, term);\r\n  }\r\n\r\n  /**\r\n  * Returns an array of NamedNode objects of your friends\r\n  * @param {string} uri webId where you want to look (defaults to your webId)\r\n  * @return {Promise<Array<NamedNode>>} A promise cntaining the array of NamedNode objects\r\n  */\r\n  async getFriends(uri: string = this.session.webId): Promise<Array<NamedNode>> {\r\n    return this.getArray(FOAF('knows'), uri);\r\n  }\r\n\r\n  /**\r\n  * Returns a NamedNode object containing the name of a webId\r\n  * @param {string} uri webId where you want to look (defaults to your webId)\r\n  * @return {Promise<Array<NamedNode>>} A promise cntaining the NamedNode object\r\n  */\r\n  async getName(uri: string = this.session.webId): Promise<NamedNode> {\r\n    return this.getSingle(VCARD('fn'), uri);\r\n  }\r\n\r\n  /**\r\n  * Returns a NamedNode object containing the url of the inbox of a webId\r\n  * @param {string} webId webId where you want to look (defaults to your webId)\r\n  * @return {Promise<Array<NamedNode>>} A promise cntaining the NamedNode object\r\n  */\r\n  async getInboxUrl(webId: string = this.session.webId): Promise<NamedNode> {\r\n    return this.getSingle(LDP('inbox'), webId);\r\n  }\r\n\r\n  /**\r\n  * Returns an array of NamedNode objects with the contents of the inbox\r\n  * @param {string} webId webId where you want to look (defaults to your webId)\r\n  * @return {Promise<Array<NamedNode>>} A promise cntaining the array of NamedNode objects\r\n  */\r\n  async getInboxContents(webId: string = this.session.webId): Promise<Array<NamedNode>> {\r\n    return this.getArray(LDP('contains'), (await this.getInboxUrl(webId)).value);\r\n  }\r\n\r\n  /**\r\n   * Gets all the message uris for a chat.ttl file\r\n   * @param {string} year Year\r\n   * @param {string} month Month\r\n   * @param {string} day Day\r\n   * @param {string} chatUri The uri of the root folder for the chat\r\n   * @return {string} The uri of the chat.ttl file\r\n   */\r\n  getChatFileUriForDate(year: string, month: string, day: string, chatUri: string) {\r\n    return chatUri + '/' + year + '/' + month + '/' + day + '/' + 'chat.ttl';\r\n  }\r\n\r\n  /**\r\n   * Gets all the message uris for a chat.ttl file\r\n   * @param {string} chatFileUri The uri of the chat.ttl file\r\n   * @param {string} chatUri The uri of the root folder for the chat\r\n   * @return {Promise<Array<NamedNode>>} NamedNode objects containing the uris of each message\r\n   */\r\n  async getMessageUrisForFile(chatFileUri: string, chatUri: string): Promise<Array<NamedNode>> {\r\n    const d = this.store.sym(chatFileUri);\r\n    await this.fetcher.load(d.doc());\r\n    const indexUri = chatUri + '/index.ttl#this';\r\n    const indexd = this.store.sym(indexUri);\r\n    const messagesIdsList = (await this.store.match(indexd, FLOW('message'), null, d.doc())).map(e => e.object);\r\n    return messagesIdsList;\r\n  }\r\n\r\n  /**\r\n  * Gets the maker of a given message\r\n  * @param {string} msgUri The uri of the message\r\n  * @param {string} chatFileUri The uri of the chat.ttl file\r\n  * @return {string} webId of the maker\r\n  */\r\n  async getMessageMaker(msgUri: string, chatFileUri: string) {\r\n    const subject = this.store.sym(msgUri);\r\n    const chatFile = this.store.sym(chatFileUri);\r\n    await this.fetcher.load(chatFile.doc(), {force: true, clearPreviousData: true});\r\n    const msgMaker = await this.store.match(subject, FOAF('maker'), null, chatFile.doc());\r\n    return msgMaker[0].object.value;\r\n  }\r\n\r\n  /**\r\n  * Gets the date of a given message\r\n  * @param {string} msgUri The uri of the message\r\n  * @param {string} chatFileUri The uri of the chat.ttl file\r\n  * @return {Date} date the message was sent\r\n  */\r\n  async getMessageDate(msgUri: string, chatFileUri: string) {\r\n    const subject = this.store.sym(msgUri);\r\n    const chatFile = this.store.sym(chatFileUri);\r\n    await this.fetcher.load(chatFile.doc());\r\n    const msgDate = await this.store.match(subject, TERMS('created'), null, chatFile.doc());\r\n    return new Date(msgDate[0].object.value);\r\n  }\r\n\r\n  /**\r\n  * Gets the content of a given message.\r\n  * @param {string} msgUri The uri of the message\r\n  * @param {string} chatFileUri The uri of the chat.ttl file\r\n  * @return {string} content of the messahge\r\n  */\r\n  async getMessageContent(msgUri: string, chatFileUri: string) {\r\n    const subject = this.store.sym(msgUri);\r\n    const chatFile = this.store.sym(chatFileUri);\r\n    await this.fetcher.load(chatFile.doc());\r\n    const msgContent = await this.store.match(subject, SIOC('content'), null, chatFile.doc());\r\n    return msgContent[0].object.value;\r\n  }\r\n\r\n  /**\r\n  * Returns the uri of the chat channel used for a conversation between two webids\r\n  * @param {string} myWebId My webId\r\n  * @param {string} otherWebId The webId of the other person\r\n  * @return {Promise<string>} Promise resolving to the uri of the chanel\r\n  */\r\n  async getChannelUri(myWebId: string, otherWebId: string): Promise<string> {\r\n    const d = this.store.sym(myWebId.replace('#me', ''));\r\n    await this.fetcher.load(d.doc());\r\n    const other = this.store.sym(otherWebId);\r\n    const coinc = await this.store.match(null, MEE('LongChat'), other, d.doc());\r\n    return coinc[0].subject.value;\r\n  }\r\n\r\n  /**\r\n  * Adds the new message to the given chat file\r\n  * @param {string} chatFileUri uri of the chat file where we want to append the message\r\n  * @param {ChatMessage} message Chat message we want to append\r\n  * @return {Promise<string>} Promise resolving to the uri of the message\r\n  */\r\n  async appendMessage(chatFileUri: string, message: ChatMessage) {\r\n    const msgUri = this.buildMsgUri(chatFileUri, message.timeSent);\r\n    const indexUri = chatFileUri.split('/').slice(0, 5).join('/') + '/index.ttl#this';\r\n    const msgUriSym = this.store.sym(msgUri);\r\n    const indexUriSym = this.store.sym(indexUri);\r\n\r\n    const ins = [];\r\n\r\n    const cFile = this.store.sym(chatFileUri);\r\n    this.fetcher.load(cFile.doc());\r\n    ins.push($rdf.st(msgUriSym, TERMS('created'), message.timeSent, cFile.doc()));\r\n    ins.push($rdf.st(msgUriSym, SIOC('content'), message.message, cFile.doc()));\r\n    ins.push($rdf.st(msgUriSym, FOAF('maker'), this.store.sym(message.webId), cFile.doc()));\r\n\r\n    ins.push($rdf.st(indexUriSym, FLOW('message'), msgUriSym, cFile.doc()));\r\n\r\n\r\n    this.updateManager.update([], ins, (uri, ok, msg, response) => {\r\n      if (ok) {\r\n        console.log('Message sent');\r\n      } else {\r\n        console.log(msg, response);\r\n      }\r\n    });\r\n\r\n    const chatFolder = chatFileUri.split('/').slice(0, 5).join('/') + '/';\r\n\r\n    this.sendNotifNewMessage(message.other, chatFolder, msgUri);\r\n    return msgUri;\r\n  }\r\n\r\n  /**\r\n  * Removes the specified message from the given chat file\r\n  * @param {string} chatFileUri uri of the chat file from which we want to delete the message\r\n  * @param {ChatMessage} message Chat message we want to delete\r\n  * @return {Promise}\r\n  */\r\n  async deleteMessage(chatFileUri: string, message: ChatMessage) {\r\n    const msgUri = message.uri;\r\n    const indexUri = chatFileUri.split('/').slice(0, 5).join('/') + '/index.ttl#this';\r\n    const msgUriSym = this.store.sym(msgUri);\r\n    const indexUriSym = this.store.sym(indexUri);\r\n\r\n    const cFile = this.store.sym(chatFileUri);\r\n    this.fetcher.load(cFile.doc());\r\n    const dels = this.store.statementsMatching(msgUriSym, null, null, cFile.doc());\r\n\r\n    this.store.statementsMatching(indexUriSym, null, msgUriSym, cFile.doc()).forEach(element => {\r\n      dels.push(element);\r\n    });\r\n\r\n    this.updateManager.update(dels, [], (uri, ok, msg, response) => {\r\n      if (ok) {\r\n        console.log('Message deleted: ' + message.message + ' (' + message.timeSent + ')');\r\n      } else {\r\n        console.log(msg, response);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Builds the URI of the message from the URI of its chat and the sent date\r\n   * @param {string} chatFileUri uri of the chat to which the message belongs\r\n   * @param {Date} timeSent Date in which the message was sent\r\n   * @return {string} the uri of the message\r\n   */\r\n  buildMsgUri(chatFileUri: string, timeSent: Date) {\r\n    const msgUri = chatFileUri + '#Msg' + timeSent.getTime();\r\n    return msgUri.substring(0, msgUri.length - 3);\r\n  }\r\n\r\n  /**\r\n  * Adds a listener to a file for when it changes\r\n  * @param {string} chatFileUri the uri of the resource we want to listen to\r\n  * @param {function} callback function to call onUpdate\r\n  */\r\n  async addListener(chatFileUri: string, callback: any) {\r\n    const cFile = this.store.sym(chatFileUri);\r\n    this.updateManager.addDownstreamChangeListener(cFile.doc(), callback);\r\n  }\r\n\r\n  /**\r\n  * Adds a user to your friends list\r\n  * @param {string} addWebId the webId of the friend you want to add\r\n  */\r\n  async addFriend(addWebId: string) {\r\n    await this.getSession();\r\n    const card = this.store.sym(this.session.webId.replace('#me', ''));\r\n    const me = this.store.sym(this.session.webId);\r\n    const newFriend = this.store.sym(addWebId);\r\n    await this.fetcher.load(newFriend.doc());\r\n\r\n    const checks = await this.store.match(null, null, FOAF('PersonalProfileDocument'), newFriend.doc());\r\n\r\n\r\n    if (checks.length > 0 && addWebId !== '') {\r\n      try {\r\n        const ins = $rdf.st(me, FOAF('knows'), newFriend, card.doc());\r\n\r\n        this.updateManager.update([], ins, (uri, ok, message, response) => {\r\n          if (ok) {\r\n            console.log('Friend added');\r\n          } else {\r\n            console.log(message, response);\r\n          }\r\n        });\r\n      } catch {\r\n        throw new Error('Not a valid profile URI');\r\n      }\r\n    } else {\r\n      throw new Error('Not a valid profile URI');\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Creates a new chat folder and its index, also adds the info on the user's card\r\n  * @param {string} myWebId the webId of the user creating the chat\r\n  * @param {string} otherWebId the other person webId\r\n  * @param {string} chatFolder folder to contain the chat data\r\n  */\r\n  async createNewChat(myWebId: string, otherWebId: string, chatFolder: string) {\r\n    const indexFileUri = chatFolder + '/index.ttl';\r\n    const pId = 'id' + (+new Date);\r\n\r\n    const pIdUriSym = this.store.sym(indexFileUri + '#pId' + pId);\r\n    const thisUriSym = this.store.sym(indexFileUri + '#this');\r\n    const sPrefUriSym = this.store.sym(indexFileUri + '#SharedPreferences');\r\n    const meUriSym = this.store.sym(myWebId);\r\n    const otherUiSym = this.store.sym(otherWebId);\r\n\r\n    const currDate = new Date();\r\n\r\n    const ins = [];\r\n\r\n    const indexFile = this.store.sym(indexFileUri);\r\n    const myCardFile = this.store.sym(myWebId.replace('#me', ''));\r\n    const chatFolderFile = this.store.sym(chatFolder);\r\n    this.fetcher.load(myCardFile.doc());\r\n\r\n\r\n    ins.push($rdf.st(pIdUriSym, ICAL('dtstart'), currDate, indexFile.doc()));\r\n    ins.push($rdf.st(pIdUriSym, FLOW('participant'), meUriSym, indexFile.doc()));\r\n    ins.push($rdf.st(pIdUriSym, FLOW('participant'), otherUiSym, indexFile.doc()));\r\n    ins.push($rdf.st(pIdUriSym, UI('backgroundColor'), '#f0d3e3', indexFile.doc()));\r\n\r\n    ins.push($rdf.st(thisUriSym, RDFSYN('type'), MEE('LongChat'), indexFile.doc()));\r\n    ins.push($rdf.st(thisUriSym, DCEL('author'), meUriSym, indexFile.doc()));\r\n    ins.push($rdf.st(thisUriSym, DCEL('created'), currDate, indexFile.doc()));\r\n    ins.push($rdf.st(thisUriSym, DCEL('title'), 'Chat Channel', indexFile.doc()));\r\n    ins.push($rdf.st(thisUriSym, FLOW('participation'), pIdUriSym, indexFile.doc()));\r\n    ins.push($rdf.st(thisUriSym, UI('sharedPreferences'), sPrefUriSym, indexFile.doc()));\r\n\r\n\r\n    await this.updateManager.put(indexFile.doc(), ins, 'text/turtle', (uri, ok, message, response) => {\r\n      if (ok) {\r\n        console.log(`File [${this.urlLogFilter(uri)}] PUT with message [${message}].`);\r\n      } else {\r\n        console.error(`File [${this.urlLogFilter(uri)}] failed PUT with message [${message}].`);\r\n      }\r\n    });\r\n\r\n    const cardNote = $rdf.st(chatFolderFile, MEE('LongChat'), otherUiSym, myCardFile.doc());\r\n\r\n    await this.updateManager.update([], cardNote, (uri, ok, message, response) => {\r\n      if (ok) {\r\n        console.log(`Reference set on card [${this.urlLogFilter(uri)}] UPDATED with message [${message}].`);\r\n      } else {\r\n        console.log(`Reference set on card [${this.urlLogFilter(uri)}] failed UPDATE with message [${message}].`);\r\n      }\r\n    });\r\n    this.setPermissions(chatFolder, otherWebId, myWebId);\r\n    this.sendNotifNewConv(myWebId, chatFolder, otherWebId);  // Commented to avoid spamming the other person while testing\r\n  }\r\n\r\n  /**\r\n  * Creates the chat file only if it doesn't exist\r\n  * @param {string} uri the uri of the chat file\r\n  */\r\n  async createChatFileForDay(uri: string) {\r\n    const chatDayFile = this.store.sym(uri);\r\n    const chatFolder = uri.replace('/chat.ttl', '');\r\n    const chatDayFolder = this.store.sym(chatFolder);\r\n    await this.fetcher.load(chatDayFolder.doc());\r\n    const matches = await this.store.match(chatDayFolder, LDP('contains'), null, chatDayFolder.doc());\r\n\r\n    if (matches.length === 0) {\r\n      console.log(`    Chat file [${this.urlLogFilter(uri)}] in folder [${this.urlLogFilter(chatFolder)}] NOT FOUND, creating it...`);\r\n      await this.updateManager.put(chatDayFile.doc(), '', 'text/turtle', function (o, s, c) { });\r\n      console.log(`    Chat file [${this.urlLogFilter(uri)}] in folder [${this.urlLogFilter(chatFolder)}] CREATED`);\r\n    } else {\r\n      console.log(`    Chat file [${this.urlLogFilter(uri)}] in folder [${this.urlLogFilter(chatFolder)}] FOUND, skipping creation`);\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Creates the folder structure\r\n  * @param {string} uri the uri of the chat file that needs the structure\r\n  */\r\n  async createStructure(uri: string) {\r\n    console.log('Creating folder structure');\r\n    const splitted = uri.split('/');\r\n    for (let i = 4; i > 0; i--) {\r\n      const newUri = splitted.slice(0, splitted.length - i).join('/');\r\n      console.log(`    Creating folder [${this.urlLogFilter(newUri)}]`);\r\n      await fileClient.createFolder(newUri);\r\n    }\r\n    console.log('Folder structure done, proceeding with chat file.');\r\n    await this.createChatFileForDay(uri);\r\n  }\r\n\r\n  /**\r\n  * Formats the uris for the console output, removing unnecesary parts\r\n  * @param {string} uri uri that needs formatting\r\n  */\r\n  urlLogFilter(url: string) {\r\n    return url.replace('https://josecuriosoalternativo.inrupt.net', '').replace('https://josecurioso.solid.community', '');\r\n  }\r\n\r\n  /**\r\n   * Sends a notification to the webId's inbox informing of the newly created chat\r\n   * @param {string} webId webId of the other person\r\n   * @param {string} chatFolderUri URI of the folder containing the chat\r\n   */\r\n  async sendNotifNewConv(webId: string, chatFolderUri: string, otherWebId: string) {\r\n    const inboxUrl = (await this.getInboxUrl(otherWebId)).value;\r\n    const notiFile = this.store.sym(inboxUrl + 'dechatnotifications.ttl');\r\n\r\n    const chatFolderFile = this.store.sym(chatFolderUri);\r\n    const meWebIdFile = this.store.sym(webId);\r\n\r\n    const ins = [];\r\n\r\n    ins.push($rdf.st(meWebIdFile, MEE('LongChat'), chatFolderFile, notiFile.doc()));\r\n\r\n    this.pushNotification(inboxUrl, ins);\r\n\r\n  }\r\n\r\n  /**\r\n   * Sends a notification to the webId's inbox about a new message being received\r\n   * @param {string} webId webId of the other person\r\n   * @param {string} chatFolderUri URI of the folder containing the chat\r\n   * @param {string} messageUri URI of the message the wbId is being notified of\r\n   */\r\n  async sendNotifNewMessage(webId: string, chatFolderUri: string, messageUri: string) {\r\n    const inboxUrl = (await this.getInboxUrl(webId)).value;\r\n    const notiFile = this.store.sym(inboxUrl + 'dechatnotifications.ttl');\r\n    const messageUriFile = this.store.sym(messageUri);\r\n    const chatFolderFile = this.store.sym(chatFolderUri);\r\n\r\n    const ins = [];\r\n\r\n    ins.push($rdf.st(chatFolderFile, NONE('NewMessage'), messageUriFile, notiFile.doc()));\r\n\r\n    this.pushNotification(inboxUrl, ins);\r\n  }\r\n  /**\r\n   * Pushes a given notification to the given user with the given content\r\n   * @param {inboxUrl} chatUri Uri of the inbox of the recipient\r\n   * @param {Array<any>} ins The inserts to be made\r\n   */\r\n  async pushNotification(inboxUrl: string, ins: Array<any>) {\r\n    const notiUri = inboxUrl + 'dechatnotifications.ttl';\r\n\r\n    const notiFile = this.store.sym(notiUri);\r\n    const inboxFolder = this.store.sym(inboxUrl);\r\n\r\n\r\n    solid.auth.fetch(inboxUrl, {\r\n      method: 'POST',\r\n      body: ins[0]\r\n    });\r\n\r\n    /*\r\n    console.log(`    File [${this.urlLogFilter(notiUri)}] in folder [${this.urlLogFilter(inboxUrl)}] NOT FOUND, creating it...`);\r\n      await this.updateManager.put(notiFile.doc(), ins, 'text/turtle', function (o, s, c) { });\r\n      console.log(`    File [${this.urlLogFilter(notiUri)}] in folder [${this.urlLogFilter(inboxUrl)}] CREATED`);\r\n    */\r\n\r\n\r\n    /*\r\n    await this.fetcher.load(inboxFolder.doc());\r\n    const matches = await this.store.match(inboxFolder, LDP('contains'), notiFile, inboxFolder.doc());\r\n\r\n    if (matches.length === 0) {\r\n      console.log(`    File [${this.urlLogFilter(notiUri)}] in folder [${this.urlLogFilter(inboxUrl)}] NOT FOUND, creating it...`);\r\n      await this.updateManager.put(notiFile.doc(), '', 'text/turtle', function (o, s, c) { });\r\n      console.log(`    File [${this.urlLogFilter(notiUri)}] in folder [${this.urlLogFilter(inboxUrl)}] CREATED`);\r\n    } else {\r\n      console.log(`    File [${this.urlLogFilter(notiUri)}] in folder [${this.urlLogFilter(inboxUrl)}] FOUND, updating it...`);\r\n    }\r\n    await this.fetcher.load(notiFile.doc());\r\n    await this.updateManager.update([], ins, (uri, ok, message, response) => {\r\n      if (ok) {\r\n        console.log(`    File [${this.urlLogFilter(notiUri)}] in folder [${this.urlLogFilter(inboxUrl)}]` +\r\n                        ` UPDATED with message [${message}].`);\r\n      } else {\r\n        console.log(`    File [${this.urlLogFilter(notiUri)}] in folder [${this.urlLogFilter(inboxUrl)}]` +\r\n                        ` FAILED UPDATED with message [${message}].`);\r\n      }\r\n    });\r\n    */\r\n  }\r\n\r\n  /**\r\n   * Adds the edit permissions on a given URI for a given WebId\r\n   * @param {string} resourceUri the URI of the resource we want to grant permissions of\r\n   * @param {string} webId the user that is getting access rights\r\n   */\r\n  async setPermissions(resourceUri: string, webId: string, ownerWebId: string) {\r\n    const aclUri = resourceUri + '/.acl';\r\n    const crwUri = aclUri + '#ControlReadWrite';\r\n    const rUri = aclUri + '#Read';\r\n    const rwUri = aclUri + '#ReadWrite';\r\n    const aclFile = this.store.sym(aclUri);\r\n    const crwFile = this.store.sym(crwUri);\r\n    const rFile = this.store.sym(rUri);\r\n    const rwFile = this.store.sym(rwUri);\r\n    const file = this.store.sym(resourceUri + '/');\r\n    const webIdFile = this.store.sym(webId);\r\n    const ownerWebIdFile = this.store.sym(ownerWebId);\r\n\r\n    const ins = [];\r\n\r\n    this.store.add(crwFile, RDFSYN('type'), ACL('Authorization'), aclFile.doc());\r\n    this.store.add(crwFile, ACL('agent'), ownerWebIdFile, aclFile.doc());\r\n    this.store.add(crwFile, ACL('accessTo'), file, aclFile.doc());\r\n    this.store.add(crwFile, ACL('defaultForNew'), file, aclFile.doc());\r\n    this.store.add(crwFile, ACL('mode'), ACL('Control'), aclFile.doc());\r\n    this.store.add(crwFile, ACL('mode'), ACL('Read'), aclFile.doc());\r\n    this.store.add(crwFile, ACL('mode'), ACL('Write'), aclFile.doc());\r\n\r\n    this.store.add(rFile, RDFSYN('type'), ACL('Authorization'), aclFile.doc());\r\n    this.store.add(rFile, ACL('agentClass'), FOAF('Agent'), aclFile.doc());\r\n    this.store.add(rFile, ACL('accessTo'), file, aclFile.doc());\r\n    this.store.add(rFile, ACL('defaultForNew'), file, aclFile.doc());\r\n    this.store.add(rFile, ACL('mode'), ACL('Read'), aclFile.doc());\r\n\r\n    this.store.add(rwFile, RDFSYN('type'), ACL('Authorization'), aclFile.doc());\r\n    this.store.add(rwFile, ACL('agent'), webIdFile, aclFile.doc());\r\n    this.store.add(rwFile, ACL('accessTo'), file, aclFile.doc());\r\n    this.store.add(rwFile, ACL('defaultForNew'), file, aclFile.doc());\r\n    this.store.add(rwFile, ACL('mode'), ACL('Read'), aclFile.doc());\r\n    this.store.add(rwFile, ACL('mode'), ACL('Write'), aclFile.doc());\r\n\r\n\r\n    const contents = $rdf.serialize(aclFile.doc(), this.store, aclUri, 'text/turtle');\r\n    await this.updateManager.put(aclFile.doc(), contents, 'text/turtle', (uri, ok, message, response) => {\r\n      if (ok) {\r\n        console.log(`File [${this.urlLogFilter(uri)}] PUT with message [${message}].`);\r\n      } else {\r\n        console.error(`File [${this.urlLogFilter(uri)}] failed PUT with message [${message}].`);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Checks the inbox for notifications, processes them and returns them to the chat service using the given callback\r\n   * @param {string} webId The webIf of the owner of the inbox of intrest (usually the logged in user)\r\n   * @param {function} callback The callback function in chatservice that we have to call whenever we find and interesting notification\r\n   */\r\n  async checkInbox(webId: string, caller: ChatService) {\r\n    console.log('Checking inbox...');\r\n    console.log(webId);\r\n    const inboxUri = await this.getInboxUrl(webId);\r\n    const inboxUriSym = this.store.sym(inboxUri);\r\n\r\n    const processed: Array<Notification> = [];\r\n    await this.fetcher.load(inboxUriSym.doc(), {force: true, clearPreviousData: true});\r\n    const contentUris = (await this.store.match(null, RDFSYN('type'), PL('Resource'), inboxUriSym.doc())).map(e => e.subject);\r\n    console.log(`    Elements found: ${contentUris.length}`);\r\n    await contentUris.forEach(async element => {\r\n      if (alreadychecked.indexOf(element) === -1) {\r\n        console.log(`    Checking: ${element}`);\r\n        await this.processNotification(element).then(async result => {\r\n          if (result.type !== 'none') {\r\n            processed.push(result);\r\n            this.deleteNotification(element);\r\n            await caller.callbackForNotificationProcessing(result);\r\n          } else {\r\n            alreadychecked.push(element); // Only save on checked the ones we have not deleted.\r\n          }\r\n        });\r\n      }\r\n    });\r\n    console.log(`    All ${contentUris.length} elements checked`);\r\n  }\r\n\r\n  /**\r\n   * This method parses the text and processes the contents returning a Notification object containing the information\r\n   * @param {string} notificationUri URI of the notification we want to process\r\n   * @return {Notification} The Notification extracted from the URI\r\n   */\r\n  async processNotification(notificationUri: string): Promise<Notification> {\r\n    console.log(`    Processing: ${notificationUri}`);\r\n    let notification: Notification;\r\n\r\n    await this.store.fetcher.webOperation('GET', notificationUri).then(async res => {\r\n      if (res.status === 404) {\r\n      } else {\r\n        const body = res.responseText;\r\n        const doc = $rdf.sym(notificationUri);\r\n        try {\r\n          await $rdf.parse(body, this.store, doc.uri, 'text/turtle');\r\n          let content = await this.store.match(null, NONE('NewMessage'), null, doc.doc());\r\n          if (content.length > 0) {\r\n            notification = new Notification(content[0].subject.value, 'NewMessage', content[0].object.value);\r\n          } else {\r\n            content = await this.store.match(null, MEE('LongChat'), null, doc.doc());\r\n            if (content.length > 0) {\r\n              notification = new Notification(content[0].subject.value, 'LongChat', content[0].object.value);\r\n            } else {\r\n              notification = new Notification('error', 'none', 'error');\r\n            }\r\n          }\r\n        } catch (error) {\r\n          notification = new Notification('error', 'none', 'error');\r\n          console.log(`    Unable to parse: ${notificationUri}`);\r\n        }\r\n      }\r\n    });\r\n    return notification;\r\n  }\r\n\r\n  /**\r\n   * This method deletes a notification once it has been consumed.\r\n   * @param {string} notificationUri URI of the notification we want to delete.\r\n   */\r\n  async deleteNotification(notificationUri: string) {\r\n    console.log(`    Deleting: ${notificationUri}`);\r\n    await this.store.fetcher.webOperation('DELETE', notificationUri)\r\n                      .then(e => {\r\n                        console.log(`    Deleted: ${notificationUri}`);\r\n                      });\r\n  }\r\n\r\n  async addChatToCard(myWebId: string, otherWebId: string, chatFolder: string) {\r\n    const myCardFile = this.store.sym(myWebId.replace('#me', '#'));\r\n    const chatFolderFile = this.store.sym(chatFolder);\r\n    const otherWebIdFile = this.store.sym(otherWebId);\r\n\r\n    await this.fetcher.load(myCardFile.doc(), {force: true, clearPreviousData: true});\r\n\r\n    const cardNote = $rdf.st(chatFolderFile, MEE('LongChat'), otherWebIdFile, myCardFile.doc());\r\n\r\n    await this.updateManager.update([], cardNote, (uri, ok, message, response) => {\r\n      if (ok) {\r\n        console.log(`Reference set on card [${this.urlLogFilter(uri)}] UPDATED with message [${message}].`);\r\n      } else {\r\n        console.log(`Reference set on card [${this.urlLogFilter(uri)}] failed UPDATE with message [${message}].`);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, from } from 'rxjs';\r\nimport { RdfService } from './rdf.service';\r\nimport { SolidProvider } from '../models/solid-provider.model';\r\ndeclare let solid: any;\r\n\r\ninterface SolidSession {\r\n  accessToken: string;\r\n  clientId: string;\r\n  idToken: string;\r\n  sessionKey: string;\r\n  webId: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  session: Observable<SolidSession>;\r\n  fechInit = {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Content-Type': 'application/sparql-update',\r\n    },\r\n    body: '',\r\n  };\r\n\r\n  constructor(private router: Router) {\r\n    this.isSessionActive();\r\n  }\r\n\r\n  /*\r\n   * This will check if current session is active to avoid security problems\r\n  */\r\n  isSessionActive = async () => {\r\n    this.session = from(solid.auth.currentSession());\r\n  }\r\n\r\n  /**\r\n   * Alternative login-popup function. This will open a popup that will allow you to choose an identity provider\r\n   * without leaving the current page\r\n   * This is recommended if you don't want to leave the current workflow.\r\n   */\r\n  solidLoginPopup = async () => {\r\n    try {\r\n      await solid.auth.popupLogin({ popupUri: './login-popup'});\r\n      // Check if session is valid to avoid redirect issues\r\n      await this.isSessionActive();\r\n\r\n      // popupLogin success redirect to profile\r\n      this.router.navigate(['/chat']);\r\n    } catch (error) {\r\n      console.log(`Error: ${error}`);\r\n    }\r\n  }\r\n\r\n  /*\r\n  * Signs out of Solid in this app, by calling the logout function and clearing the localStorage token\r\n  */\r\n  solidSignOut = async () => {\r\n    try {\r\n      await solid.auth.logout();\r\n      // Remove localStorage\r\n      localStorage.removeItem('solid-auth-client');\r\n      // Redirect to login page\r\n      this.router.navigate(['/']);\r\n    } catch (error) {\r\n      console.log(`Error: ${error}`);\r\n    }\r\n  }\r\n\r\n  saveOldUserData = (profile: any) => {\r\n    if (!localStorage.getItem('oldProfileData')) {\r\n      localStorage.setItem('oldProfileData', JSON.stringify(profile));\r\n    }\r\n  }\r\n\r\n  getOldUserData = () => {\r\n    return JSON.parse(localStorage.getItem('oldProfileData'));\r\n  }\r\n\r\n  /*\r\n  *  Make a call to the solid auth endpoint. It requires an identity provider url, which here is coming from the dropdown, which\r\n  *  is populated by the getIdentityProviders() function call. It currently requires a callback url and a storage option or else\r\n  *  the call will fail.\r\n  */\r\n  solidLogin = async (idp: string) => {\r\n    await solid.auth.login(idp, {\r\n      callbackUri: `${window.location.href}chat`,\r\n      storage: localStorage,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Function to get providers. This is to mimic the future provider registry\r\n   *\r\n   * @return {SolidProvider[]} A list of SolidProviders\r\n   */\r\n  getIdentityProviders(): SolidProvider[] {\r\n    const inruptProvider: SolidProvider = {\r\n      name: 'Inrupt',\r\n      image: '/assets/images/Inrupt.png',\r\n      loginUrl: 'https://inrupt.net/auth',\r\n      desc: 'Inrupt Inc. provider'\r\n    };\r\n    const solidCommunityProvider: SolidProvider = {\r\n      name: 'Solid Community',\r\n      image: '/assets/images/Solid.png',\r\n      loginUrl: 'https://solid.community',\r\n      desc: 'A provider maintained by the Solid Community'\r\n    };\r\n    const otherProvider: SolidProvider = {\r\n      name: 'Other (Enter WebID)',\r\n      image: '/assets/images/Generic.png',\r\n      loginUrl: null,\r\n      desc: 'Generic provider'\r\n    };\r\n\r\n    return [\r\n      inruptProvider,\r\n      solidCommunityProvider,\r\n      otherProvider\r\n    ];\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * In development mode, to ignore zone related error stack frames such as\r\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\r\n * import the following file, but please comment it out in production mode\r\n * because it will have performance impact when throw error\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"],"sourceRoot":""}